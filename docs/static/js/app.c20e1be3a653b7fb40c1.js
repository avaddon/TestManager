webpackJsonp([1],{"+JC9":function(t,e){},"1/oy":function(t,e){},"6BnS":function(t,e){},Id91:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={};n.d(s,"GET_QUESTION_PACKS",function(){return Z}),n.d(s,"ADD_QUESTION_PACK",function(){return tt}),n.d(s,"SAVE_QUESTION_PACK",function(){return et}),n.d(s,"DELETE_QUESTION_PACK",function(){return nt});var i={};n.d(i,"GET_QUESTIONS",function(){return it}),n.d(i,"GET_ALL_QUESTIONS",function(){return ot}),n.d(i,"ADD_QUESTION",function(){return at}),n.d(i,"SAVE_QUESTION",function(){return rt}),n.d(i,"DELETE_QUESTION",function(){return ut});var o={};n.d(o,"GET_TESTS",function(){return lt}),n.d(o,"ADD_TEST",function(){return dt}),n.d(o,"ADD_TEST_TITLE_ONLY",function(){return pt}),n.d(o,"SAVE_TEST",function(){return ft}),n.d(o,"DELETE_TEST",function(){return mt});var a=n("7+uW"),r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var u=n("VU/8")({name:"app"},r,!1,function(t){n("pbN+")},null,null).exports,c=n("/ocq"),l=n("mtWM"),d=n.n(l),p={user:{authenticated:!1},authenticate:function(t,e,n){var s=this;d.a.post("https://testingmanager.herokuapp.com/api/v1/auth",e).then(function(e){var i=e.data;t.$cookies.set("token",i.token,"1D"),t.$cookies.set("user_id",i.user._id,"1D"),t.validLogin=!0,s.user.authenticated=!0,n&&G.push(n)}).catch(function(e){var n=e.response.data;t.snackbar=!0,t.message=n.message})},signup:function(t,e,n){var s=this;d.a.post("https://testingmanager.herokuapp.com/api/v1/signup",e).then(function(){t.validSignUp=!0,s.authenticate(t,e,n)}).catch(function(e){var n=e.response.data;t.snackbar=!0,t.message=n.message})},signout:function(t,e){window.$cookies.remove("token"),window.$cookies.remove("user_id"),this.user.authenticated=!1,this.$store.commit("setLoggedUser",null),e&&G.push(e)},checkAuthentication:function(){var t=document.cookie;this.user.authenticated=!!t},getAuthenticationHeader:function(t){return"Bearer "+window.$cookies.get("token")}},f=n("Dd8w"),m=n.n(f),_=n("NYxO"),v={data:function(){return{}},computed:m()({},Object(_.b)({getPublishedTests:"test/publishedTests"})),mounted:function(){this.$store.dispatch("test/GET_TESTS")},methods:{}},b={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("app-header"),t._v(" "),n("b-container",[n("h4",{staticClass:"my-2"},[t._v("Доступные тесты")]),t._v(" "),n("b-list-group",t._l(t.getPublishedTests,function(e){return n("div",{key:e._id},[n("b-list-group-item",{staticClass:"d-flex justify-content-between align-items-center",attrs:{id:e._id}},[n("a",{attrs:{href:"#"}},[t._v(t._s(e.title))]),t._v(" "),n("b-badge",{attrs:{variant:"primary",pill:""}},[t._v(t._s(e.questions.length))])],1),t._v(" "),n("b-tooltip",{attrs:{target:e._id}},[n("span",{staticStyle:{"font-size":".8em"},domProps:{innerHTML:t._s(e.description)}})])],1)}))],1)],1)},staticRenderFns:[]},h=n("VU/8")(v,b,!1,null,null,null).exports,g=n("BO1k"),k=n.n(g),q={data:function(){return{testListViewing:!0,currentTest:null,newTestTitle:"",testTitleEditing:!1,testDescriptionEditing:!1,selectedQuestonPack:null,testTableFields:[{key:"title",label:"Название"},{key:"author.username",label:"Автор"},{key:"published",label:"Опубликовано"},{key:"actions",label:"Действия"}],customToolbar:[["bold","italic","underline"],[{list:"ordered"},{list:"bullet"}],["code-block"]]}},computed:m()({question_pack_options:function(){var t=[],e=!0,n=!1,s=void 0;try{for(var i,o=k()(this.question_packs);!(e=(i=o.next()).done);e=!0){var a=i.value;t.push({value:a,text:a.title})}}catch(t){n=!0,s=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw s}}return t},questionsOfSelectedQuestionPack:function(){var t=this;return null!==this.selectedQuestonPack?this.questions.filter(function(e){return e.question_pack._id===t.selectedQuestonPack._id}):null}},Object(_.b)({tests:"test/tests",questions:"questions/questions",question_packs:"questionPack/questionPacks"})),mounted:function(){this.$store.dispatch("test/GET_TESTS"),this.$store.dispatch("questionPack/GET_QUESTION_PACKS"),this.$store.dispatch("questions/GET_ALL_QUESTIONS")},methods:{questionAlreadyInTest:function(t){return-1!==this.currentTest.questions.findIndex(function(e){return e._id===t._id})}}},E={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("app-header"),t._v(" "),t.testListViewing?n("b-container",[n("b-button-toolbar",{staticClass:"my-2"},[n("b-button-group",[n("b-btn",{directives:[{name:"b-modal",rawName:"v-b-modal.addNewTest",modifiers:{addNewTest:!0}}],attrs:{size:"sm",variant:"primary"}},[t._v("Добавить")])],1)],1),t._v(" "),n("b-table",{attrs:{striped:"",items:t.tests,fields:t.testTableFields},scopedSlots:t._u([{key:"title",fn:function(e){return[n("a",{attrs:{href:"#"},on:{click:function(n){n.stopPropagation(),t.testListViewing=!t.testListViewing,t.currentTest=JSON.parse(JSON.stringify(e.item))}}},[t._v(t._s(e.item.title))])]}},{key:"published",fn:function(t){return[n("div",{staticClass:"d-block",staticStyle:{"text-align":"center"}},[t.item.published?n("i",{staticClass:"fas fa-check-circle",staticStyle:{color:"green"}}):n("i",{staticClass:"fas fa-minus-circle",staticStyle:{color:"red"}})])]}},{key:"actions",fn:function(e){return[n("div",{staticClass:"text-sm-right"},[n("b-button",{attrs:{size:"sm",variant:"info"},on:{click:function(t){return t.stopPropagation(),e.toggleDetails(t)}}},[n("i",{staticClass:"fas fa-info-circle",attrs:{"aria-hidden":"true"}})]),t._v(" "),n("click-confirm",[n("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:function(n){n.stopPropagation(),t.$store.dispatch("test/DELETE_TEST",e.item)}}},[n("i",{staticClass:"fas fa-trash",attrs:{"aria-hidden":"true"}})])],1)],1)]}},{key:"row-details",fn:function(e){return[n("b-card",[n("p",[t._v("Всего вопросов: "+t._s(e.item.questions.length))]),t._v(" "),n("p",{domProps:{innerHTML:t._s(e.item.description)}})])]}}])}),t._v(" "),n("b-modal",{attrs:{id:"addNewTest","ok-title":"Сохранить","cancel-title":"Отмена",title:"Добавить новый тест"},on:{ok:function(e){t.$store.dispatch("test/ADD_TEST_TITLE_ONLY",t.newTestTitle)},show:function(e){t.newTestTitle=""}}},[n("b-form",[n("b-input-group",{attrs:{size:"sm",prepend:"Название"}},[n("b-form-input",{model:{value:t.newTestTitle,callback:function(e){t.newTestTitle=e},expression:"newTestTitle"}})],1)],1)],1)],1):t._e(),t._v(" "),t.testListViewing?t._e():n("b-container",[n("b-button-toolbar",{staticClass:"my-2"},[n("b-button-group",{attrs:{size:"sm"}},[n("b-btn",{attrs:{variant:"primary"},on:{click:function(e){t.$store.dispatch("test/SAVE_TEST",t.currentTest)}}},[t._v("\n          Сохранить\n        ")]),t._v(" "),n("b-btn",{attrs:{pressed:t.currentTest.published,variant:t.currentTest.published?"success":"outline-danger"},on:{"update:pressed":function(e){t.$set(t.currentTest,"published",e)}}},[t._v("\n         "+t._s(t.currentTest.published?"Опубликовано":" Не опубликовано")+"\n        ")]),t._v(" "),n("b-btn",{attrs:{variant:"outline-secondary"},on:{click:function(e){t.testListViewing=!0,t.currentTest=null}}},[t._v("\n          Назад\n        ")])],1)],1),t._v(" "),n("b-container",{attrs:{fluid:""}},[n("div",{staticClass:"my-2"},[t.testTitleEditing?n("b-input-group",[n("b-form-input",{model:{value:t.currentTest.title,callback:function(e){t.$set(t.currentTest,"title",e)},expression:"currentTest.title"}}),t._v(" "),n("b-input-group-append",[n("b-btn",{attrs:{variant:"primary"},on:{click:function(e){t.testTitleEditing=!1}}},[n("i",{staticClass:"far fa-save"})])],1)],1):n("h3",[t._v("\n          "+t._s(t.currentTest.title)+"\n          "),n("a",{on:{click:function(e){t.testTitleEditing=!0}}},[n("i",{staticClass:"far fa-edit",staticStyle:{"font-size":".5em",color:"green"}})])])],1),t._v(" "),n("div",{staticClass:"my-2"},[t.testDescriptionEditing?n("div",[n("vue-editor",{attrs:{editorToolbar:t.customToolbar,id:"description-editor"},model:{value:t.currentTest.description,callback:function(e){t.$set(t.currentTest,"description",e)},expression:"currentTest.description"}}),t._v(" "),n("b-btn",{staticClass:"float-right",attrs:{size:"sm",variant:"primary"},on:{click:function(e){t.testDescriptionEditing=!1}}},[t._v("Готово")])],1):n("div",{staticClass:"d-flex justify-content-between align-items-center"},[n("span",{domProps:{innerHTML:t._s(t.currentTest.description)}}),t._v(" "),n("a",{on:{click:function(e){t.testDescriptionEditing=!0}}},[n("i",{staticClass:"far fa-edit",staticStyle:{color:"green"}})])])]),t._v(" "),n("b-row",[n("b-col",{attrs:{cols:"8"}},[n("b-list-group",[n("h5",[t._v("Вопросы в тесте:")]),t._v(" "),t._l(t.currentTest.questions,function(e){return n("b-list-group-item",{key:e.id,staticClass:"question px-2 py-2 d-flex justify-content-between align-items-center",on:{click:function(n){n.stopPropagation(),t.$store.commit("test/DELETE_QUESTION",{test:t.currentTest,question:e})}}},[n("div",[n("span",{domProps:{innerHTML:t._s(e.question)}}),t._v(" "),n("small",{staticClass:"text-muted"},[t._v(t._s(e.question_pack.title))])]),t._v(" "),n("b-badge",{attrs:{pill:"",variant:"primary"}},[t._v(t._s(e.type))])],1)})],2)],1),t._v(" "),n("b-col",[n("b-form-group",{attrs:{label:"Добавить вопросы из сборника:","label-for":"question-pack-selector"}},[n("b-form-select",{attrs:{options:t.question_pack_options,id:"question-pack-selector",size:"sm"},model:{value:t.selectedQuestonPack,callback:function(e){t.selectedQuestonPack=e},expression:"selectedQuestonPack"}})],1),t._v(" "),n("b-list-group",{staticClass:"mt-2"},t._l(t.questionsOfSelectedQuestionPack,function(e){return n("b-list-group-item",{key:e._id,staticClass:"question px-2 py-2 d-flex justify-content-between align-items-center",attrs:{variant:t.questionAlreadyInTest(e)?"success":""},on:{click:function(n){n.stopPropagation(),t.$store.commit("test/ADD_QUESTION",{test:t.currentTest,question:e})}}},[n("span",{domProps:{innerHTML:t._s(e.question)}}),t._v(" "),n("b-badge",{attrs:{pill:"",variant:"primary"}},[t._v(t._s(e.type))])],1)}))],1)],1)],1)],1)],1)},staticRenderFns:[]};var T=n("VU/8")(q,E,!1,function(t){n("6BnS")},null,null).exports,S=n("mvHQ"),w=n.n(S),y={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-card",[n("b-card-header",{domProps:{innerHTML:t._s(t.question.question)}}),t._v(" "),(t.question.type="выбор")?n("div",[n("b-list-group",t._l(t.question.answers,function(e){return n("b-list-group-item",{key:e._id,attrs:{variant:e.correct?"success":""}},[t._v("\n        "+t._s(e.answer)+"\n      ")])}))],1):t._e()],1)},staticRenderFns:[]},P={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-row",[n("b-col",{attrs:{cols:"9"}},[n("vue-editor",{attrs:{editorToolbar:t.customToolbar},model:{value:t.question.question,callback:function(e){t.$set(t.question,"question",e)},expression:"question.question"}})],1),t._v(" "),n("b-col",[n("b-form-group",{attrs:{label:"Тип вопроса"}},[n("b-form-select",{attrs:{options:t.questionTypes},model:{value:t.question.type,callback:function(e){t.$set(t.question,"type",e)},expression:"question.type"}})],1)],1)],1),t._v(" "),n("b-row",{staticClass:"mt-2"},[n("b-col",[t._v("Ответ(ы):")])],1),t._v(" "),"выбор"==t.question.type?n("div",t._l(t.question.choise_answers,function(e,s){return n("b-input-group",{key:s,staticClass:"mt-2"},[n("b-input-group-prepend",{attrs:{"is-text":""}},[n("b-form-checkbox",{staticClass:"mr-0",attrs:{plain:""},model:{value:e.correct,callback:function(n){t.$set(e,"correct",n)},expression:"answer.correct"}})],1),t._v(" "),n("b-form-input",{attrs:{type:"text",size:"sm"},model:{value:e.answer,callback:function(n){t.$set(e,"answer",n)},expression:"answer.answer"}}),t._v(" "),n("b-input-group-append",[s!=t.question.choise_answers.length-1?n("b-btn",{attrs:{size:"sm",variant:"danger"},on:{click:function(){-1!==s&&t.question.choise_answers.splice(s,1)}}},[n("i",{staticClass:"fas fa-minus"})]):t._e(),t._v(" "),s==t.question.choise_answers.length-1?n("b-btn",{attrs:{size:"sm",variant:"success"},on:{click:function(e){t.question.choise_answers.push({answer:"",correct:!1})}}},[n("i",{staticClass:"fas fa-plus"})]):t._e()],1)],1)})):"ввод ответа"==t.question.type?n("div",[t._v("\n    "+t._s(t.question.type)+"\n  ")]):t._e()],1)},staticRenderFns:[]},Q={question:"",type:"выбор",choise_answers:[{answer:"",correct:!1},{answer:"",correct:!1}]},C={components:{"question-card":n("VU/8")({props:["question"]},y,!1,null,null,null).exports,"question-editor":n("VU/8")({data:function(){return{questionTypes:["выбор","ввод ответа"],customToolbar:[["bold","italic","underline"],[{list:"ordered"},{list:"bullet"}],["code-block"]]}},props:["question_pack_id","question"],methods:{addSaveQuestion:function(){"выбор"===this.question.type&&(this.question.answers=this.question.choise_answers);var t={_id:this.question._id,question:this.question.question,type:this.question.type,question_pack:this.question_pack_id,answers:this.question.answers};this.question._id?this.$store.dispatch("questions/SAVE_QUESTION",t):this.$store.dispatch("questions/ADD_QUESTION",t)}}},P,!1,null,null,null).exports},data:function(){return{newQuestionPackName:"",needUpdateQuestionCounts:!1,questionsEditing:!1,questionPackForEdit:{},questionEditorFields:[{key:"question",label:"Вопрос"},{key:"actions",label:"Действия"}],newQuestion:JSON.parse(w()(Q))}},props:["fields"],computed:m()({curentQuestionSet:function(){var t=this;return this.questions.filter(function(e){return e.question_pack._id===t.questionPackForEdit._id})}},Object(_.b)({question_packs:"questionPack/questionPacks",questions:"questions/questions",questionSetCount:"questions/questionSetCount"})),mounted:function(){this.$store.dispatch("questionPack/GET_QUESTION_PACKS"),this.$store.dispatch("questions/GET_ALL_QUESTIONS")},methods:{saveQuestionPack:function(t){this.$store.dispatch("questionPack/SAVE_QUESTION_PACK",t),t.editing=!1},addQuestionPack:function(){this.$store.dispatch("questionPack/ADD_QUESTION_PACK",this.newQuestionPackName),this.$refs.addQuestionPackModal.hide()},handleAddQuestionPackSubmit:function(t){t.preventDefault(),this.newQuestionPackName?this.addQuestionPack():alert("Поле не должно быть пустым")},getQuestionsForEditor:function(t){(this.questionPackForEdit!==t||this.needUpdateQuestionCounts)&&(this.questionPackForEdit=t)},showQuestionEditorModal:function(t){t?(this.newQuestion=JSON.parse(w()(t)),"выбор"===this.newQuestion.type&&(this.newQuestion.choise_answers=this.newQuestion.answers)):this.newQuestion=JSON.parse(w()(Q)),this.$refs.addEditQuestionModal.show()}}},O={render:function(){var t=this,e=this,n=e.$createElement,s=e._self._c||n;return s("div",[e.questionsEditing?e._e():s("b-button-toolbar",{staticClass:"my-2"},[s("b-button-group",[s("b-btn",{directives:[{name:"b-modal",rawName:"v-b-modal.addQuestionPackModal",modifiers:{addQuestionPackModal:!0}}],attrs:{size:"sm",variant:"primary"}},[e._v("Добавить")])],1)],1),e._v(" "),e.questionsEditing?s("b-button-toolbar",{staticClass:"my-2"},[s("b-button-group",[s("b-btn",{attrs:{size:"sm",variant:"primary"},on:{click:function(t){e.showQuestionEditorModal(null)}}},[e._v("\n        Добавить новый вопрос\n      ")]),e._v(" "),s("b-btn",{attrs:{size:"sm",variant:"outline-secondary"},on:{click:function(t){e.questionsEditing=!1}}},[e._v("\n        Назад\n      ")])],1)],1):e._e(),e._v(" "),e.questionsEditing?e.questionsEditing?s("b-table",{attrs:{striped:"",fields:e.questionEditorFields,items:e.curentQuestionSet},scopedSlots:e._u([{key:"question",fn:function(t){return[s("div",{staticClass:"pr-2"},[s("a",{staticClass:"question",attrs:{href:"#"},domProps:{innerHTML:e._s(t.item.question)},on:{click:function(n){e.showQuestionEditorModal(t.item)}}}),e._v(" "),s("b-badge",{attrs:{pill:""}},[e._v(e._s(t.item.type))])],1)]}},{key:"actions",fn:function(t){return[s("div",{staticClass:"text-sm-right"},[s("b-button",{attrs:{size:"sm",variant:"info"},on:{click:function(e){return e.stopPropagation(),t.toggleDetails(e)}}},[s("i",{staticClass:"fas fa-info-circle",attrs:{"aria-hidden":"true"}})]),e._v(" "),s("click-confirm",[s("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:function(n){n.stopPropagation(),e.$store.dispatch("questions/DELETE_QUESTION",t.item)}}},[s("i",{staticClass:"fas fa-trash",attrs:{"aria-hidden":"true"}})])],1)],1)]}},{key:"row-details",fn:function(t){return[s("question-card",{attrs:{question:t.item}})]}}])}):e._e():s("b-table",{attrs:{striped:"",fields:e.fields,items:e.question_packs},scopedSlots:e._u([{key:"title",fn:function(t){return[s("a",{attrs:{href:"#"},on:{click:function(n){e.questionsEditing=!e.questionsEditing,e.getQuestionsForEditor(t.item)}}},[e._v(e._s(t.item.title))])]}},{key:"actions",fn:function(t){return[s("div",{staticClass:"text-sm-right"},[s("b-button",{attrs:{size:"sm",variant:"info"},on:{click:function(e){return e.stopPropagation(),t.toggleDetails(e)}}},[s("i",{staticClass:"fas fa-info-circle",attrs:{"aria-hidden":"true"}})]),e._v(" "),s("click-confirm",[s("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:function(n){n.stopPropagation(),e.$store.dispatch("questionPack/DELETE_QUESTION_PACK",t.item)}}},[s("i",{staticClass:"fas fa-trash",attrs:{"aria-hidden":"true"}})])],1)],1)]}},{key:"row-details",fn:function(t){return[s("b-card",[s("b-row",{staticClass:"mb-2"},[s("b-col",{staticClass:"text-sm-right",attrs:{sm:"3"}},[s("b",[e._v("Вопросов:")])]),e._v(" "),s("b-col",{attrs:{sm:"3"},domProps:{textContent:e._s(e.questionSetCount(t.item._id))}}),e._v(" "),s("b-col",{staticClass:"text-sm-right col-sm"},[s("b-button",{attrs:{size:"sm"},on:{click:function(e){t.item.editing=!t.item.editing}}},[s("i",{staticClass:"fas fa-edit",attrs:{"aria-hidden":"true"}})])],1)],1),e._v(" "),t.item.editing?s("b-row",[s("b-input-group",{attrs:{prepend:"Новое название"}},[s("b-form-input",{model:{value:t.item.title,callback:function(n){e.$set(t.item,"title",n)},expression:"row.item.title"}}),e._v(" "),s("b-input-group-append",[s("b-btn",{attrs:{variant:"success"},on:{click:function(n){e.saveQuestionPack(t.item)}}},[s("i",{staticClass:"far fa-save"})])],1)],1)],1):e._e()],1)]}}])}),e._v(" "),e.questionsEditing?e._e():s("b-modal",{ref:"addQuestionPackModal",attrs:{id:"addQuestionPackModal",title:"Добавить новый сборник вопросов","ok-title":"Сохранить","cancel-title":"Отмена"},on:{ok:e.handleAddQuestionPackSubmit,show:function(t){e.newQuestionPackName=""}}},[s("b-form",{on:{submit:function(t){return t.stopPropagation(),t.preventDefault(),e.handleAddQuestionPackSubmit(t)}}},[s("b-input-group",{attrs:{size:"sm",prepend:"Название"}},[s("b-form-input",{model:{value:e.newQuestionPackName,callback:function(t){e.newQuestionPackName=t},expression:"newQuestionPackName"}})],1)],1)],1),e._v(" "),e.questionsEditing?s("b-modal",{ref:"addEditQuestionModal",attrs:{id:"addEditQuestionModal",title:"Редактирование вопроса","ok-title":"Сохранить","cancel-title":"Отмена",size:"lg"},on:{ok:function(){t.$refs.questionEditor.addSaveQuestion()}}},[s("question-editor",{ref:"questionEditor",attrs:{question_pack_id:e.questionPackForEdit._id,question:e.newQuestion}})],1):e._e()],1)},staticRenderFns:[]};var U={components:{"question-pack-table":n("VU/8")(C,O,!1,function(t){n("+JC9")},null,null).exports},data:function(){return{questionPackHeaders:[{key:"title",label:"Название"},{key:"actions",label:"Действия"}]}},methods:{}},A={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("app-header"),this._v(" "),e("b-container",[e("question-pack-table",{attrs:{fields:this.questionPackHeaders}})],1)],1)},staticRenderFns:[]},N=n("VU/8")(U,A,!1,null,null,null).exports,D={data:function(){return{signUpVisible:!1,rules:[function(t){return!!t||"This field is required"}],credentials:{username:"",password:""},newUser:{username:"",password:""}}},methods:{submitAuthentication:function(){p.authenticate(this,this.credentials,"/")},submitSignUp:function(){p.signup(this,this.newUser,"/")}}},x={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("app-header"),t._v(" "),n("div",{staticClass:"module form-module"},[n("div",{staticClass:"toggle",on:{click:function(e){t.signUpVisible=!t.signUpVisible}}},[n("i",{staticClass:"fa fa-times fa-pencil"}),t._v(" "),n("div",{staticClass:"tooltip"},[t._v("Click me")])]),t._v(" "),n("transition",{attrs:{name:"slide-fade"}},[t.signUpVisible?t._e():n("div",{staticClass:"form"},[n("h2",[t._v("Войти в свой аккаунт")]),t._v(" "),n("b-form",[n("b-form-input",{attrs:{placeholder:"Имя пользователя",rules:t.rules,required:""},model:{value:t.credentials.username,callback:function(e){t.$set(t.credentials,"username","string"==typeof e?e.trim():e)},expression:"credentials.username"}}),t._v(" "),n("b-form-input",{attrs:{placeholder:"Пароль",rules:t.rules,required:"",type:"password"},model:{value:t.credentials.password,callback:function(e){t.$set(t.credentials,"password",e)},expression:"credentials.password"}}),t._v(" "),n("b-button",{on:{click:function(e){t.submitAuthentication()}}},[t._v("Войти")])],1)],1)]),t._v(" "),n("div",{staticClass:"form"},[n("h2",[t._v("Создать аккаунт")]),t._v(" "),n("b-form",[n("b-form-input",{attrs:{placeholder:"Имя пользователя",rules:t.rules,required:""},model:{value:t.newUser.username,callback:function(e){t.$set(t.newUser,"username",e)},expression:"newUser.username"}}),t._v(" "),n("b-form-input",{attrs:{placeholder:"Пароль",rules:t.rules,required:"",type:"password"},model:{value:t.newUser.password,callback:function(e){t.$set(t.newUser,"password",e)},expression:"newUser.password"}}),t._v(" "),n("b-button",{on:{click:function(e){t.submitSignUp()}}},[t._v("Зарегестрироваться")])],1)],1)],1)],1)},staticRenderFns:[]};var I=n("VU/8")(D,x,!1,function(t){n("yilm")},null,null).exports,$={computed:m()({},Object(_.c)(["user"])),mounted:function(){this.$store.dispatch("getLoggedUser")},methods:{submitSignout:function(){p.signout(this,"/")},checkAuthentication:function(){return p.user.authenticated}}},L={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-navbar",{attrs:{type:"dark",variant:"info",toggleable:"md"}},[n("b-navbar-toggle",{attrs:{target:"nav_dropdown_collapse"}}),t._v(" "),n("b-navbar-brand",{attrs:{to:{name:"Home"}}},[t._v("TestManager")]),t._v(" "),n("b-collapse",{attrs:{"is-nav":"",id:"nav_dropdown_collapse"}},[n("b-navbar-nav",{staticClass:"ml-auto"},[n("b-nav-item",{attrs:{to:{name:"TestEditor"}}},[t._v("Редактор тестов")]),t._v(" "),n("b-nav-item",{attrs:{to:{name:"QuestionEditor"}}},[t._v("Редактор вопросов")]),t._v(" "),t.checkAuthentication()?t._e():n("b-nav-item",{attrs:{to:{name:"Authentication"}}},[t._v("Войти")]),t._v(" "),t.checkAuthentication()&&t.user?n("div",[n("b-nav-item-dropdown",{attrs:{text:t.user.username,boundary:"window"}},[n("b-dropdown-item",{on:{click:function(e){t.submitSignout()}}},[t._v("Выйти")])],1)],1):t._e()],1)],1)],1)},staticRenderFns:[]},z=n("VU/8")($,L,!1,null,null,null).exports,V=n("woOf"),F=n.n(V),M={title:"Вы уверены?",yes:"Да",no:"Нет"},H={data:function(){return{isOpen:!1,randomId:"clickConfirm"+this._uid,target:null,allow:!1}},props:{buttonSize:{type:String,default:"",validator:function(t){return["lg","","sm"].includes(t)}},disabled:{type:Boolean,default:!1},messages:{type:Object,default:function(){return M}},noClass:{type:[String,Array,Object],default:"btn btn-secondary"},noIcon:{type:[String,Array,Object],default:"fa fa-times"},placement:{type:String,default:"top"},yesClass:{type:[String,Array,Object],default:"btn btn-primary"},yesIcon:{type:[String,Array,Object],default:"fa fa-check"}},computed:{buttonSizeClass:function(){return this.buttonSize?"btn-"+this.buttonSize:""},messagesMerged:function(){return F()({},M,this.messages)}},methods:{onHidden:function(){this.target=null},onOk:function(){if(null!==this.target){this.allow=!0;var t=new MouseEvent("click",{bubbles:!0,cancelable:!0,composed:!0});this.target.dispatchEvent(t)||console.error("Confirmed event failed to dispatch"),this.allow=!1}this.onCancel()},onCancel:function(){this.isOpen=!1},interceptEvent:function(t){this.disabled||(this.target=t.target,this.allow||(this.isOpen=!0,this.setFocusOnButtonYes(),t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation()))},setFocusOnButtonYes:function(){var t=this;this.$nextTick(function(){t.$nextTick(function(){t.isOpen&&t.$refs.buttonYes.focus()})})}},beforeDestroy:function(){this.isOpen&&this.onCancel()}},j={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[n("span",{ref:"trigger",attrs:{id:t.randomId,tabindex:"-1"},on:{"!click":function(e){return t.interceptEvent(e)}}},[t._t("default")],2),t._v(" "),n("b-popover",{ref:"popover",staticClass:"click-confirm",attrs:{target:t.randomId,show:t.isOpen,placement:t.placement,title:t.messages.title,triggers:"blur"},on:{"update:show":function(e){t.isOpen=e},hidden:t.onHidden}},[n("div",{staticClass:"text-center"},[n("button",{ref:"buttonYes",class:[t.yesClass,t.buttonSizeClass],on:{click:function(e){return e.preventDefault(),t.onOk(e)}}},[t.yesIcon?n("span",{class:t.yesIcon,attrs:{"aria-hidden":"true"}}):t._e(),t._v(" "+t._s(t.messages.yes)+"\n      ")]),t._v(" "),n("button",{ref:"buttonNo",class:[t.noClass,t.buttonSizeClass],on:{click:function(e){return e.preventDefault(),t.onCancel(e)}}},[t.noIcon?n("span",{class:t.noIcon,attrs:{"aria-hidden":"true"}}):t._e(),t._v(" "+t._s(t.messages.no)+"\n      ")])])])],1)},staticRenderFns:[]},K=n("VU/8")(H,j,!1,null,null,null).exports;a.a.component("app-header",z),a.a.component("click-confirm",K),a.a.use(c.a);var R=new c.a({routes:[{path:"/",name:"Home",component:h,meta:{requiredAuth:!1}},{path:"/test-editor",name:"TestEditor",component:T,meta:{requiredAuth:!0}},{path:"/question-editor",name:"QuestionEditor",component:N,meta:{requiredAuth:!0}},{path:"/login",name:"Authentication",component:I}]});R.beforeEach(function(t,e,n){t.meta.requiredAuth?p.user.authenticated?n():R.push("/login"):n()});var G=R,J=n("ppUw"),Y=n.n(J),B=n("e6fC"),W=d.a.create({baseURL:"https://testingmanager.herokuapp.com"});W.defaults.headers.common.Authorization=p.getAuthenticationHeader(this);var X=W;function Z(t){var e=t.commit;X.get("/api/v1/question_pack").then(function(t){var n=t.data;e("SET_QUESTION_PACKS",n)})}function tt(t,e){var n=t.commit;X.post("/api/v1/question_pack",{title:e}).then(function(t){var e=t.data;n("ADD_QUESTION_PACK",e.question_pack)})}function et(t,e){t.commit;X.put("/api/v1/question_pack/single",{_id:e._id,title:e.title})}function nt(t,e){var n=t.commit;X.delete("/api/v1/question_pack",{params:{question_pack_id:e._id}}).then(function(t){t.data;n("DELETE_QUESTION_PACK",e)})}var st={namespaced:!0,state:{questionPacks:[]},actions:s,mutations:{SET_QUESTION_PACKS:function(t,e){t.questionPacks=e;var n=!0,s=!1,i=void 0;try{for(var o,r=k()(t.questionPacks);!(n=(o=r.next()).done);n=!0){var u=o.value;a.a.set(u,"editing",!1),a.a.set(u,"questions",void 0)}}catch(t){s=!0,i=t}finally{try{!n&&r.return&&r.return()}finally{if(s)throw i}}},ADD_QUESTION_PACK:function(t,e){a.a.set(e,"editing",!1),a.a.set(e,"questions",void 0),t.questionPacks.push(e)},DELETE_QUESTION_PACK:function(t,e){var n=t.questionPacks.indexOf(e);-1!==n&&t.questionPacks.splice(n,1)}},getters:{questionPacks:function(t){return t.questionPacks}}};function it(t,e){var n=t.commit;X.get("/api/v1/question",{params:{question_pack:e._id}}).then(function(t){var e=t.data;n("SET_QUESTIONS",e)})}function ot(t){var e=t.commit;X.get("/api/v1/question").then(function(t){var n=t.data;e("SET_QUESTIONS",n)})}function at(t,e){var n=t.commit;return X.post("/api/v1/question",e).then(function(t){var e=t.data;return n("ADD_QUESTION",e.question),e})}function rt(t,e){var n=t.commit;return X.put("/api/v1/question/single",e).then(function(t){var e=t.data;return n("SAVE_QUESTION",e.question),e})}function ut(t,e){var n=t.commit;X.delete("/api/v1/question",{params:{question_id:e._id}}).then(function(t){t.data;n("DELETE_QUESTION",e)})}var ct={namespaced:!0,state:{questions:[]},actions:i,mutations:{SET_QUESTIONS:function(t,e){t.questions=e},DELETE_QUESTION:function(t,e){var n=t.questions.indexOf(e);-1!==n&&t.questions.splice(n,1)},ADD_QUESTION:function(t,e){t.questions.push(e)},SAVE_QUESTION:function(t,e){var n=t.questions.findIndex(function(t){return t._id===e._id});-1!==n&&t.questions.splice(n,1,e)}},getters:{questions:function(t){return t.questions},questionSetCount:function(t){return function(e){return t.questions.filter(function(t){return t.question_pack._id===e}).length}}}};function lt(t){var e=t.commit;X.get("/api/v1/test").then(function(t){var n=t.data;e("SET_TESTS",n)})}function dt(t,e){X.post("/api/v1/test",e).then(function(e){var n=e.data;t.commit("ADD_TEST",n.test)})}function pt(t,e){dt(t,{title:e,description:"",questions:[],author:t.rootState.user})}function ft(t,e){var n=t.commit;X.put("/api/v1/test/single",e).then(function(t){var e=t.data;n("SAVE_TEST",e.test)})}function mt(t,e){var n=t.commit;X.delete("/api/v1/test",{params:{test_id:e._id}}).then(function(t){t.data;n("DELETE_TEST",e)})}var _t={namespaced:!0,state:{tests:[]},actions:o,mutations:{SET_TESTS:function(t,e){t.tests=e},ADD_TEST:function(t,e){t.tests.push(e)},ADD_QUESTION:function(t,e){var n=e.test,s=e.question;-1===n.questions.findIndex(function(t){return t._id===s._id})&&n.questions.push(s)},DELETE_QUESTION:function(t,e){var n=e.test,s=e.question,i=n.questions.indexOf(s);-1!==i&&n.questions.splice(i,1)},SAVE_TEST:function(t,e){var n=t.tests.findIndex(function(t){return t._id===e._id});-1!==n&&t.tests.splice(n,1,e)},DELETE_TEST:function(t,e){var n=t.tests.indexOf(e);-1!==n&&t.tests.splice(n,1)}},getters:{tests:function(t){return t.tests},publishedTests:function(t){return t.tests.filter(function(t){return t.published})}}};a.a.use(_.a);var vt=new _.a.Store({state:{user:null},mutations:{setLoggedUser:function(t,e){t.user=e}},actions:{getLoggedUser:function(t){var e=t.commit,n=window.$cookies.get("user_id");X.get("/api/v1/user",{params:{id:n}}).then(function(t){var n=t.data;e("setLoggedUser",n)})}},modules:{questionPack:st,questions:ct,test:_t},strict:!1}),bt=n("aYpo"),ht=n.n(bt);a.a.use(Y.a),a.a.use(B.a),a.a.use(ht.a),a.a.config.productionTip=!1,p.checkAuthentication(),new a.a({el:"#app",router:G,components:{App:u},template:"<App/>",store:vt})},"pbN+":function(t,e){},yilm:function(t,e){},zj2Q:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.c20e1be3a653b7fb40c1.js.map