webpackJsonp([1],{"48cH":function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={};n.d(i,"GET_QUESTION_PACKS",function(){return R}),n.d(i,"ADD_QUESTION_PACK",function(){return j}),n.d(i,"SAVE_QUESTION_PACK",function(){return J}),n.d(i,"DELETE_QUESTION_PACK",function(){return Y});var s={};n.d(s,"GET_QUESTIONS",function(){return B}),n.d(s,"GET_ALL_QUESTIONS",function(){return W}),n.d(s,"ADD_QUESTION",function(){return X}),n.d(s,"SAVE_QUESTION",function(){return Z}),n.d(s,"DELETE_QUESTION",function(){return tt});var o={};n.d(o,"GET_TESTS",function(){return nt}),n.d(o,"ADD_TEST",function(){return it}),n.d(o,"ADD_TEST_TITLE_ONLY",function(){return st}),n.d(o,"SAVE_TEST",function(){return ot}),n.d(o,"DELETE_TEST",function(){return at});var a=n("7+uW"),r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("v-app",[e("app-header"),this._v(" "),e("v-content",[e("v-container",{attrs:{fluid:""}},[e("router-view")],1)],1)],1)},staticRenderFns:[]};var c=n("VU/8")({name:"app"},r,!1,function(t){n("48cH")},null,null).exports,u=n("/ocq"),l=n("mtWM"),d=n.n(l),v={authenticate:function(t,e,n){d.a.post("https://testingmanager.herokuapp.com/api/v1/auth",e).then(function(e){var i=e.data;t.$cookies.set("token",i.token,"1D"),t.$cookies.set("user_id",i.user._id,"1D"),t.$store.commit("setLoggedUser",i.user),n&&I.push(n)}).catch(function(t){var e=t.response.data;a.default.$notify.error(e.message)})},signup:function(t,e,n){var i=this;d.a.post("https://testingmanager.herokuapp.com/api/v1/signup",e).then(function(){i.authenticate(t,e,n)}).catch(function(t){var e=t.response.data;a.default.$notify.error(e.message)})},signout:function(t,e){t.$cookies.remove("token"),t.$cookies.remove("user_id"),t.$store.commit("setLoggedUser",null),e&&I.push(e)},checkAuthentication:function(){return window.$cookies.keys().length>0},getAuthenticationHeader:function(t){return"Bearer "+window.$cookies.get("token")}},p=n("Dd8w"),_=n.n(p),f=n("NYxO"),m={data:function(){return{headers:[{value:"title",text:"Название"},{value:"author_username",text:"Автор"},{value:"questions_count",text:"Вопросов"}]}},computed:_()({},Object(f.b)({getPublishedTests:"test/publishedTests"})),mounted:function(){this.$store.dispatch("test/GET_TESTS")},methods:{}},h={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",{attrs:{flat:""}},[n("v-toolbar",{attrs:{flat:"",dark:"",color:"primary",app:""}},[n("v-toolbar-side-icon",{on:{click:function(e){e.stopPropagation(),t.$store.commit("navigationDrawerChange")}}})],1),t._v(" "),n("v-card-title",{staticClass:"headline"},[t._v("Доступные тесты")]),t._v(" "),n("v-card-text",[n("v-data-table",{attrs:{items:t.getPublishedTests,headers:t.headers,"rows-per-page-text":"Показывать на странице: ","rows-per-page-items":[10,25,50,{text:"All",value:-1}]},scopedSlots:t._u([{key:"items",fn:function(e){return[n("td",[n("a",[t._v(t._s(e.item.title))])]),t._v(" "),n("td",[t._v(t._s(e.item.author.username))]),t._v(" "),n("td",[t._v(t._s(e.item.questions.length))])]}}])})],1)],1)},staticRenderFns:[]},g=n("VU/8")(m,h,!1,null,null,null).exports,k=n("BO1k"),E=n.n(k),T={data:function(){return{testListViewing:!0,currentTest:null,newTestTitle:"",newTestDialog:!1,testTitleEditing:!1,testDescriptionEditing:!1,selectedQuestonPack:null,testTableFields:[{value:"title",text:"Название"},{value:"author.username",text:"Автор"},{value:"published",text:"Опубликовано"},{value:"actions",text:"Действия",align:"rigth"}],customToolbar:[["bold","italic","underline"],[{list:"ordered"},{list:"bullet"}],["code-block"]]}},computed:_()({question_pack_options:function(){var t=[],e=!0,n=!1,i=void 0;try{for(var s,o=E()(this.question_packs);!(e=(s=o.next()).done);e=!0){var a=s.value;t.push({value:a,text:a.title})}}catch(t){n=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw i}}return t},questionsOfSelectedQuestionPack:function(){var t=this;return null!==this.selectedQuestonPack?this.questions.filter(function(e){return e.question_pack._id===t.selectedQuestonPack._id}):null}},Object(f.b)({tests:"test/tests",questions:"questions/questions",question_packs:"questionPack/questionPacks"})),mounted:function(){this.$store.dispatch("test/GET_TESTS"),this.$store.dispatch("questionPack/GET_QUESTION_PACKS"),this.$store.dispatch("questions/GET_ALL_QUESTIONS")},methods:{questionAlreadyInTest:function(t){return-1!==this.currentTest.questions.findIndex(function(e){return e._id===t._id})},deleteTest:function(t){confirm("Вы уверены что хотите удалить тест")&&this.$store.dispatch("test/DELETE_TEST",t)}}},q={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.testListViewing?n("v-card",{attrs:{flat:""}},[n("v-toolbar",{attrs:{flat:"",dark:"",color:"primary",app:""}},[n("v-toolbar-side-icon",{on:{click:function(e){e.stopPropagation(),t.$store.commit("navigationDrawerChange")}}}),t._v(" "),n("v-btn",{staticClass:"lighten-1",attrs:{small:"",color:"primary"},nativeOn:{click:function(e){t.newTestDialog=!0}}},[n("v-icon",[t._v("add")]),t._v("\n        Добавить тест\n      ")],1)],1),t._v(" "),n("v-card-text",[n("v-data-table",{attrs:{headers:t.testTableFields,items:t.tests,"rows-per-page-text":"Показывать на странице: ","rows-per-page-items":[10,25,50,{text:"All",value:-1}]},scopedSlots:t._u([{key:"items",fn:function(e){return[n("td",[n("a",{on:{click:function(n){n.stopPropagation(),t.testListViewing=!t.testListViewing,t.currentTest=JSON.parse(JSON.stringify(e.item))}}},[t._v("\n              "+t._s(e.item.title)+"\n            ")])]),t._v(" "),n("td",[t._v(t._s(e.item.author.username))]),t._v(" "),n("td",[e.item.published?n("v-icon",{attrs:{color:"teal"}},[t._v("check_circle")]):n("v-icon",{attrs:{color:"pink"}},[t._v("remove_circle")])],1),t._v(" "),n("td",{staticClass:"text-xs-right px-0"},[n("v-btn",{staticClass:"mx-0",attrs:{icon:""},nativeOn:{click:function(n){t.deleteTest(e.item)}}},[n("v-icon",{attrs:{color:"pink"}},[t._v("delete")])],1)],1)]}}])})],1),t._v(" "),n("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.newTestDialog,callback:function(e){t.newTestDialog=e},expression:"newTestDialog"}},[n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[t._v("Добавить новый тест")])]),t._v(" "),n("v-card-text",[n("v-text-field",{attrs:{label:"Название",required:""},model:{value:t.newTestTitle,callback:function(e){t.newTestTitle=e},expression:"newTestTitle"}})],1),t._v(" "),n("v-card-actions",[n("v-spacer"),t._v(" "),n("v-btn",{attrs:{color:"blue darken-1",flat:""},nativeOn:{click:function(e){t.newTestDialog=!1}}},[t._v("Отмена")]),t._v(" "),n("v-btn",{attrs:{color:"blue darken-1",flat:""},nativeOn:{click:function(e){t.$store.dispatch("test/ADD_TEST_TITLE_ONLY",t.newTestTitle),t.newTestTitle="",t.newTestDialog=!1}}},[t._v("\n            Сохранить\n          ")])],1)],1)],1)],1):n("v-card",{attrs:{flat:""}},[n("v-toolbar",{attrs:{flat:"",dark:"",color:"primary",app:""}},[n("v-toolbar-side-icon",{on:{click:function(e){e.stopPropagation(),t.$store.commit("navigationDrawerChange")}}}),t._v(" "),n("v-btn",{staticClass:"lighten-1",attrs:{small:"",color:"primary"},on:{click:function(e){t.testListViewing=!0,t.currentTest=null}}},[n("v-icon",[t._v("arrow_back")]),t._v("Назад\n      ")],1),t._v(" "),n("v-btn",{attrs:{small:"",color:"success"},on:{click:function(e){t.$store.dispatch("test/SAVE_TEST",t.currentTest)}}},[n("v-icon",[t._v("save")]),t._v("Сохранить\n      ")],1),t._v(" "),n("v-btn",{attrs:{small:"",color:t.currentTest.published?"success":"warning"},on:{click:function(e){t.currentTest.published=!t.currentTest.published}}},[t._v("\n        "+t._s(t.currentTest.published?"Опубликовано":"Опубликовать")+"\n      ")])],1),t._v(" "),n("v-card-title",[t.testTitleEditing?n("v-layout",{attrs:{row:""}},[n("v-text-field",{attrs:{label:"Название"},model:{value:t.currentTest.title,callback:function(e){t.$set(t.currentTest,"title",e)},expression:"currentTest.title"}}),t._v(" "),n("v-btn",{staticClass:"mx-0",attrs:{icon:""},on:{click:function(e){t.testTitleEditing=!1}}},[n("v-icon",{attrs:{color:"primary"}},[t._v("save")])],1)],1):n("span",{staticClass:"headline"},[t._v("\n        "+t._s(t.currentTest.title)+"\n        "),n("a",{on:{click:function(e){t.testTitleEditing=!0}}},[n("v-icon",{attrs:{small:"",color:"primary"}},[t._v("edit")])],1)])],1),t._v(" "),n("v-card-text",[n("div",[t.testDescriptionEditing?n("v-card",[n("vue-editor",{attrs:{editorToolbar:t.customToolbar,id:"description-editor"},model:{value:t.currentTest.description,callback:function(e){t.$set(t.currentTest,"description",e)},expression:"currentTest.description"}}),t._v(" "),n("v-btn",{attrs:{color:"primary",small:"",absolute:"",bottom:"",right:"",fab:""},on:{click:function(e){t.testDescriptionEditing=!1}}},[n("v-icon",{attrs:{color:"white"}},[t._v("done")])],1)],1):n("v-card",{attrs:{flat:""}},[n("v-btn",{attrs:{color:"primary",small:"",absolute:"",bottom:"",right:"",fab:""},on:{click:function(e){t.testDescriptionEditing=!0}}},[n("v-icon",{attrs:{color:"white"}},[t._v("edit")])],1),t._v(" "),n("span",{domProps:{innerHTML:t._s(t.currentTest.description)}})],1)],1),t._v(" "),n("v-layout",{staticClass:"mt-3",attrs:{row:"",wrap:"","justify-space-between":""}},[n("v-flex",{staticClass:"mr-4",attrs:{xs8:""}},t._l(t.currentTest.questions,function(e){return n("div",{key:e._id,staticClass:"tquestion",on:{click:function(n){n.stopPropagation(),t.$store.commit("test/DELETE_QUESTION",{test:t.currentTest,question:e})}}},[n("div",[n("span",{domProps:{innerHTML:t._s(e.question)}}),t._v(" "),n("small",{staticClass:"grey--text"},[t._v(t._s(e.question_pack.title))])]),t._v(" "),n("v-chip",{staticClass:"primary white--text",attrs:{small:"",disabled:""}},[t._v(t._s(e.type))])],1)})),t._v(" "),n("v-flex",{attrs:{xs3:""}},[n("v-select",{attrs:{label:"Добавить вопросы из сборника:",items:t.question_pack_options},model:{value:t.selectedQuestonPack,callback:function(e){t.selectedQuestonPack=e},expression:"selectedQuestonPack"}}),t._v(" "),t._l(t.questionsOfSelectedQuestionPack,function(e){return n("div",{key:e._id,staticClass:"tquestion",class:t.questionAlreadyInTest(e)&&"info white--text",on:{click:function(n){n.stopPropagation(),t.$store.commit("test/ADD_QUESTION",{test:t.currentTest,question:e})}}},[n("span",{domProps:{innerHTML:t._s(e.question)}}),t._v(" "),n("v-spacer"),t._v(" "),n("v-chip",{attrs:{dark:"",small:"",disabled:""}},[t._v(t._s(e.type))])],1)})],2)],1)],1)],1)],1)},staticRenderFns:[]};var b=n("VU/8")(T,q,!1,function(t){n("RQLV")},null,null).exports,w=n("mvHQ"),S=n.n(w),P={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",[n("v-toolbar",{attrs:{dark:"",color:"primary"}},[n("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.$parent.$emit("close")}}},[n("v-icon",[t._v("close")])],1),t._v(" "),n("v-toolbar-title",[t._v("Редактирование вопроса")]),t._v(" "),n("v-spacer"),t._v(" "),n("v-select",{attrs:{label:"Тип вопроса",items:t.questionTypes},model:{value:t.question.type,callback:function(e){t.$set(t.question,"type",e)},expression:"question.type"}}),t._v(" "),n("v-spacer"),t._v(" "),n("v-toolbar-items",[n("v-btn",{attrs:{dark:"",flat:""},nativeOn:{click:function(e){t.updateQuestion(),t.$parent.$emit("close")}}},[t._v("Сохранить")])],1)],1),t._v(" "),n("v-card-text",[n("vue-editor",{attrs:{editorToolbar:t.customToolbar},model:{value:t.question.question,callback:function(e){t.$set(t.question,"question",e)},expression:"question.question"}}),t._v(" "),n("span",[t._v("Ответ(ы):")]),t._v(" "),"выбор"==t.question.type?n("div",t._l(t.question.choise_answers,function(e,i){return n("v-layout",{key:i,attrs:{"align-center":""}},[n("v-checkbox",{staticClass:"shrink mr-2",attrs:{"hide-details":""},model:{value:e.correct,callback:function(n){t.$set(e,"correct",n)},expression:"answer.correct"}}),t._v(" "),n("v-text-field",{attrs:{label:"Ответ "+(i+1)},model:{value:e.answer,callback:function(n){t.$set(e,"answer",n)},expression:"answer.answer"}}),t._v(" "),i!=t.question.choise_answers.length-1?n("v-btn",{attrs:{flat:"",icon:"",color:"error"},on:{click:function(){-1!==i&&t.question.choise_answers.splice(i,1)}}},[n("v-icon",[t._v("remove_circle")])],1):t._e(),t._v(" "),i==t.question.choise_answers.length-1?n("v-btn",{attrs:{flat:"",icon:"",color:"success"},on:{click:function(e){t.question.choise_answers.push({answer:"",correct:!1})}}},[n("v-icon",[t._v("add_circle")])],1):t._e()],1)})):"ввод ответа"==t.question.type?n("div",[t._v("\n      "+t._s(t.question.type)+"\n    ")]):t._e()],1)],1)},staticRenderFns:[]},x={question:"",type:"выбор",choise_answers:[{answer:"",correct:!1},{answer:"",correct:!1}]},Q={components:{"question-editor":n("VU/8")({data:function(){return{questionTypes:["выбор","ввод ответа"],customToolbar:[["bold","italic","underline"],[{list:"ordered"},{list:"bullet"}],["code-block"]]}},props:["question_pack_id","question"],methods:{updateQuestion:function(){"выбор"===this.question.type&&(this.question.answers=this.question.choise_answers);var t={_id:this.question._id,question:this.question.question,type:this.question.type,question_pack:this.question_pack_id,answers:this.question.answers};this.question._id?this.$store.dispatch("questions/SAVE_QUESTION",t):this.$store.dispatch("questions/ADD_QUESTION",t)}}},P,!1,null,null,null).exports},data:function(){return{newQuestionPackName:"",newQuestionPackDialog:!1,questionPackEditDialog:!1,questionPackHeaders:[{value:"title",text:"Название"},{value:"actions",text:"Действия",align:"right"}],questionsEditing:!1,needUpdateQuestionCounts:!1,questionEditorDialog:!1,questionPackForEdit:{},questionEditorFields:[{value:"question",text:"Вопрос"},{value:"actions",text:"Действия",align:"right"}],newQuestion:JSON.parse(S()(x))}},props:["fields"],computed:_()({curentQuestionSet:function(){var t=this;return this.questions.filter(function(e){return e.question_pack._id===t.questionPackForEdit._id})}},Object(f.b)({question_packs:"questionPack/questionPacks",questions:"questions/questions",questionSetCount:"questions/questionSetCount"})),mounted:function(){this.$store.dispatch("questionPack/GET_QUESTION_PACKS"),this.$store.dispatch("questions/GET_ALL_QUESTIONS")},methods:{saveQuestionPack:function(t){this.$store.dispatch("questionPack/SAVE_QUESTION_PACK",t),this.questionPackForEdit={},this.newQuestionPackName="",this.questionPackEditDialog=!1},addQuestionPack:function(){this.$store.dispatch("questionPack/ADD_QUESTION_PACK",this.newQuestionPackName),this.newQuestionPackDialog=!1},getQuestionsForEditor:function(t){(this.questionPackForEdit!==t||this.needUpdateQuestionCounts)&&(this.questionPackForEdit=t)},showQuestionEditorModal:function(t){t?(this.newQuestion=JSON.parse(S()(t)),"выбор"===this.newQuestion.type&&(this.newQuestion.choise_answers=this.newQuestion.answers)):this.newQuestion=JSON.parse(S()(x)),this.questionEditorDialog=!0},deleteQuestionPack:function(t){confirm("Вы уверены что хотите удалить сборник вопросов?")&&this.$store.dispatch("questionPack/DELETE_QUESTION_PACK",t)},deleteQuestion:function(t){confirm("Вы уверены что хотите удалить вопрос?")&&this.$store.dispatch("questions/DELETE_QUESTION",t)}}},D={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.questionsEditing?n("v-card",{attrs:{flat:""}},[n("v-toolbar",{attrs:{flat:"",dark:"",color:"primary",app:""}},[n("v-toolbar-side-icon",{on:{click:function(e){e.stopPropagation(),t.$store.commit("navigationDrawerChange")}}}),t._v(" "),n("v-btn",{staticClass:"lighten-1",attrs:{small:"",color:"primary"},on:{click:function(e){e.stopPropagation(),t.showQuestionEditorModal(null),t.questionEditorDialog=!0}}},[n("v-icon",[t._v("add")]),t._v("\n        Добавить вопрос\n      ")],1),t._v(" "),n("v-btn",{staticClass:"lighten-1",attrs:{small:"",color:"primary"},on:{click:function(e){e.stopPropagation(),t.questionsEditing=!1}}},[n("v-icon",[t._v("arrow_back")]),t._v("\n        Назад\n      ")],1)],1),t._v(" "),n("v-data-table",{attrs:{headers:t.questionEditorFields,items:t.curentQuestionSet,"rows-per-page-text":"Показывать на странице: ","rows-per-page-items":[10,25,50,{text:"All",value:-1}]},scopedSlots:t._u([{key:"items",fn:function(e){return[n("td",[n("a",{staticClass:"question",domProps:{innerHTML:t._s(e.item.question)},on:{click:function(n){n.stopPropagation(),t.showQuestionEditorModal(e.item)}}}),t._v(" "),n("v-chip",{staticClass:"primary white--text",attrs:{small:"",disabled:""}},[t._v(t._s(e.item.type))])],1),t._v(" "),n("td",{staticClass:"text-xs-right px-0"},[n("v-btn",{staticClass:"mx-0",attrs:{icon:""},on:{click:function(n){t.deleteQuestion(e.item)}}},[n("v-icon",{attrs:{color:"pink"}},[t._v("delete")])],1)],1)]}}])},[n("template",{slot:"no-data"},[n("v-alert",{attrs:{value:!0,color:"warning",icon:"warning"}},[t._v("Здесь ничего нет")])],1)],2),t._v(" "),n("v-dialog",{attrs:{fullscreen:"",transition:"dialog-bottom-transition"},on:{close:function(e){t.questionEditorDialog=!1}},model:{value:t.questionEditorDialog,callback:function(e){t.questionEditorDialog=e},expression:"questionEditorDialog"}},[n("question-editor",{attrs:{question_pack_id:t.questionPackForEdit._id,question:t.newQuestion}})],1)],1):n("v-card",{attrs:{flat:""}},[n("v-toolbar",{attrs:{flat:"",dark:"",color:"primary",app:""}},[n("v-toolbar-side-icon",{on:{click:function(e){e.stopPropagation(),t.$store.commit("navigationDrawerChange")}}}),t._v(" "),n("v-btn",{staticClass:"lighten-1",attrs:{small:"",color:"primary"},on:{click:function(e){e.stopPropagation(),t.newQuestionPackDialog=!0}}},[n("v-icon",[t._v("add")]),t._v("\n        Добавить сборник вопросов\n      ")],1)],1),t._v(" "),n("v-data-table",{attrs:{headers:t.questionPackHeaders,items:t.question_packs,"rows-per-page-text":"Показывать на странице: ","rows-per-page-items":[10,25,50,{text:"All",value:-1}]},scopedSlots:t._u([{key:"items",fn:function(e){return[n("td",[n("a",{on:{click:function(n){t.questionsEditing=!t.questionsEditing,t.getQuestionsForEditor(e.item)}}},[t._v(t._s(e.item.title))])]),t._v(" "),n("td",{staticClass:"justify-center text-xs-right px-0"},[n("v-btn",{staticClass:"mx-0",attrs:{icon:""},nativeOn:{click:function(n){t.questionPackEditDialog=!0,t.questionPackForEdit=e.item,t.newQuestionPackName=e.item.title}}},[n("v-icon",{attrs:{color:"teal"}},[t._v("edit")])],1),t._v(" "),n("v-btn",{staticClass:"mx-0",attrs:{icon:""},on:{click:function(n){t.deleteQuestionPack(e.item)}}},[n("v-icon",{attrs:{color:"pink"}},[t._v("delete")])],1)],1)]}}])},[n("template",{slot:"no-data"},[n("v-alert",{attrs:{value:!0,color:"warning",icon:"warning"}},[t._v("Здесь ничего нет")])],1)],2),t._v(" "),n("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.newQuestionPackDialog,callback:function(e){t.newQuestionPackDialog=e},expression:"newQuestionPackDialog"}},[n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[t._v("Добавить новый сборник вопросов")])]),t._v(" "),n("v-card-text",[n("v-text-field",{attrs:{label:"Название",required:""},model:{value:t.newQuestionPackName,callback:function(e){t.newQuestionPackName=e},expression:"newQuestionPackName"}})],1),t._v(" "),n("v-card-actions",[n("v-spacer"),t._v(" "),n("v-btn",{attrs:{color:"blue darken-1",flat:""},nativeOn:{click:function(e){t.newQuestionPackDialog=!1}}},[t._v("Отмена")]),t._v(" "),n("v-btn",{attrs:{color:"blue darken-1",flat:""},nativeOn:{click:function(e){t.addQuestionPack(),t.newQuestionPackName=""}}},[t._v("Сохранить")])],1)],1)],1),t._v(" "),n("v-dialog",{attrs:{"max-width":"500px",lazy:""},model:{value:t.questionPackEditDialog,callback:function(e){t.questionPackEditDialog=e},expression:"questionPackEditDialog"}},[n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[t._v("Переименовать сборник вопросов")])]),t._v(" "),n("v-card-text",[n("v-text-field",{attrs:{label:"Название",required:""},model:{value:t.newQuestionPackName,callback:function(e){t.newQuestionPackName=e},expression:"newQuestionPackName"}})],1),t._v(" "),n("v-card-actions",[n("v-spacer"),t._v(" "),n("v-btn",{attrs:{color:"blue darken-1",flat:""},nativeOn:{click:function(e){t.questionPackEditDialog=!1}}},[t._v("Отмена")]),t._v(" "),n("v-btn",{attrs:{color:"blue darken-1",flat:""},nativeOn:{click:function(e){t.questionPackForEdit.title=t.newQuestionPackName,t.saveQuestionPack(t.questionPackForEdit)}}},[t._v("Сохранить")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var U=n("VU/8")(Q,D,!1,function(t){n("vCCo")},null,null).exports,y={data:function(){return{snackbar:!1,validLogin:!1,validSignUp:!1,signUpVisible:!1,loginPasswordVisible:!1,signUpPasswordVisible:!1,timeout:6e3,rules:[function(t){return!!t||"This field is required"}],credentials:{username:"",password:""},newUser:{username:"",password:""},message:""}},methods:{submitAuthentication:function(){v.authenticate(this,this.credentials,"/")},submitSignUp:function(){v.signup(this,this.newUser,"/")}}},O={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"l-auth-container"},[n("div",{staticClass:"l-auth"},[n("v-form",{model:{value:t.validLogin,callback:function(e){t.validLogin=e},expression:"validLogin"}},[n("v-text-field",{attrs:{label:"Username","prepend-icon":"account_box",rules:t.rules,required:"",color:"light-blue lighten-1"},model:{value:t.credentials.username,callback:function(e){t.$set(t.credentials,"username",e)},expression:"credentials.username"}}),t._v(" "),n("v-text-field",{attrs:{label:"Password","prepend-icon":"lock",rules:t.rules,"append-icon":t.loginPasswordVisible?"visibility":"visibility_off",type:t.loginPasswordVisible?"text":"password",color:"light-blue lighten-1",required:""},model:{value:t.credentials.password,callback:function(e){t.$set(t.credentials,"password",e)},expression:"credentials.password"}}),t._v(" "),n("v-btn",{attrs:{flat:"",color:"light-blue lighten-1"},nativeOn:{click:function(e){t.signUpVisible=!0}}},[t._v("Create account")]),t._v(" "),n("v-btn",{attrs:{color:"light-blue lighten-1"},nativeOn:{click:function(e){t.submitAuthentication()}}},[t._v("Login")])],1)],1),t._v(" "),t.signUpVisible?n("div",{staticClass:"l-signup"},[n("v-form",{model:{value:t.validSignUp,callback:function(e){t.validSignUp=e},expression:"validSignUp"}},[n("v-text-field",{attrs:{label:"Username","prepend-icon":"account_box",rules:t.rules,required:"",color:"light-blue lighten-1"},model:{value:t.newUser.username,callback:function(e){t.$set(t.newUser,"username",e)},expression:"newUser.username"}}),t._v(" "),n("v-text-field",{attrs:{label:"Password","prepend-icon":"lock",rules:t.rules,"append-icon":t.signUpPasswordVisible?"visibility":"visibility_off","append-icon-cb":function(){return t.signUpPasswordVisible=!t.signUpPasswordVisible},type:"signUpPasswordVisible ? 'text' : 'password'",color:"light-blue lighten-1",required:""},model:{value:t.newUser.password,callback:function(e){t.$set(t.newUser,"password",e)},expression:"newUser.password"}}),t._v(" "),n("v-btn",{attrs:{block:"",color:"light-blue lighten-1"},nativeOn:{click:function(e){t.submitSignUp()}}},[t._v("Sign Up")])],1)],1):t._e(),t._v(" "),n("v-snackbar",{attrs:{timeout:t.timeout,bottom:"bottom",color:"red lighten-1"},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v("\n    "+t._s(t.message)+"\n  ")])],1)},staticRenderFns:[]},A=n("VU/8")(y,O,!1,null,null,null).exports,$={computed:_()({},Object(f.c)(["user"])),mounted:function(){this.checkAuthentication()&&!this.user&&this.$store.dispatch("getLoggedUser")},methods:{submitSignout:function(){v.signout(this,"/")},checkAuthentication:function(){return v.checkAuthentication()}}},C={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-navigation-drawer",{attrs:{app:"",temporary:""},model:{value:t.$store.state.navigationDrawer,callback:function(e){t.$set(t.$store.state,"navigationDrawer",e)},expression:"$store.state.navigationDrawer"}},[n("v-toolbar",{attrs:{flat:""}},[n("v-list",[n("v-list-tile",{attrs:{to:{name:"Home"}}},[n("v-list-tile-title",{staticClass:"title"},[t._v("TestManager")])],1)],1)],1),t._v(" "),n("v-divider"),t._v(" "),n("v-list",[n("v-list-tile",{attrs:{to:{name:"TestEditor"}}},[n("v-list-tile-content",[t._v("Редактор тестов")])],1),t._v(" "),n("v-list-tile",{attrs:{to:{name:"QuestionEditor"}}},[n("v-list-tile-content",[t._v("Редактор вопросов")])],1)],1)],1)},staticRenderFns:[]},N=n("VU/8")($,C,!1,null,null,null).exports;a.default.component("app-header",N),a.default.use(u.a);var L=new u.a({routes:[{path:"/",name:"Home",component:g,meta:{requiredAuth:!1}},{path:"/test-editor",name:"TestEditor",component:b,meta:{requiredAuth:!0}},{path:"/question-editor",name:"QuestionEditor",component:U,meta:{requiredAuth:!0}},{path:"/login",name:"Authentication",component:A}]});L.beforeEach(function(t,e,n){t.meta.requiredAuth?v.checkAuthentication()?n():L.push({name:"Authentication"}):n()});var I=L,V=n("ppUw"),F=n.n(V),H=n("3EgV"),K=n.n(H),G=d.a.create({baseURL:"https://testingmanager.herokuapp.com"});G.defaults.headers.common.Authorization=v.getAuthenticationHeader(this);var M=G;function R(t){var e=t.commit;M.get("/api/v1/question_pack").then(function(t){var n=t.data;e("SET_QUESTION_PACKS",n)})}function j(t,e){var n=t.commit;M.post("/api/v1/question_pack",{title:e}).then(function(t){var e=t.data;n("ADD_QUESTION_PACK",e.question_pack),a.default.$notify(e.message)})}function J(t,e){t.commit;M.put("/api/v1/question_pack/single",{_id:e._id,title:e.title}).then(function(t){var e=t.data;a.default.$notify(e.message)})}function Y(t,e){var n=t.commit;M.delete("/api/v1/question_pack",{params:{question_pack_id:e._id}}).then(function(t){var i=t.data;n("DELETE_QUESTION_PACK",e),a.default.$notify(i.message)})}var z={namespaced:!0,state:{questionPacks:[]},actions:i,mutations:{SET_QUESTION_PACKS:function(t,e){t.questionPacks=e},ADD_QUESTION_PACK:function(t,e){t.questionPacks.push(e)},DELETE_QUESTION_PACK:function(t,e){var n=t.questionPacks.indexOf(e);-1!==n&&t.questionPacks.splice(n,1)}},getters:{questionPacks:function(t){return t.questionPacks}}};function B(t,e){var n=t.commit;M.get("/api/v1/question",{params:{question_pack:e._id}}).then(function(t){var e=t.data;n("SET_QUESTIONS",e)})}function W(t){var e=t.commit;M.get("/api/v1/question").then(function(t){var n=t.data;e("SET_QUESTIONS",n)})}function X(t,e){var n=t.commit;return M.post("/api/v1/question",e).then(function(t){var e=t.data;return n("ADD_QUESTION",e.question),a.default.$notify(e.message),e})}function Z(t,e){var n=t.commit;return M.put("/api/v1/question/single",e).then(function(t){var e=t.data;return n("SAVE_QUESTION",e.question),a.default.$notify(e.message),e})}function tt(t,e){var n=t.commit;M.delete("/api/v1/question",{params:{question_id:e._id}}).then(function(t){var i=t.data;n("DELETE_QUESTION",e),a.default.$notify(i.message)})}var et={namespaced:!0,state:{questions:[]},actions:s,mutations:{SET_QUESTIONS:function(t,e){t.questions=e},DELETE_QUESTION:function(t,e){var n=t.questions.indexOf(e);-1!==n&&t.questions.splice(n,1)},ADD_QUESTION:function(t,e){t.questions.push(e)},SAVE_QUESTION:function(t,e){var n=t.questions.findIndex(function(t){return t._id===e._id});-1!==n&&t.questions.splice(n,1,e)}},getters:{questions:function(t){return t.questions},questionSetCount:function(t){return function(e){return t.questions.filter(function(t){return t.question_pack._id===e}).length}}}};function nt(t){var e=t.commit;M.get("/api/v1/test").then(function(t){var n=t.data;e("SET_TESTS",n)})}function it(t,e){M.post("/api/v1/test",e).then(function(e){var n=e.data;t.commit("ADD_TEST",n.test),a.default.$notify(n.message)})}function st(t,e){it(t,{title:e,description:"",questions:[],author:t.rootState.user})}function ot(t,e){var n=t.commit;M.put("/api/v1/test/single",e).then(function(t){var e=t.data;n("SAVE_TEST",e.test),a.default.$notify(e.message)})}function at(t,e){var n=t.commit;M.delete("/api/v1/test",{params:{test_id:e._id}}).then(function(t){var i=t.data;n("DELETE_TEST",e),a.default.$notify(i.message)})}var rt={namespaced:!0,state:{tests:[]},actions:o,mutations:{SET_TESTS:function(t,e){t.tests=e},ADD_TEST:function(t,e){t.tests.push(e)},ADD_QUESTION:function(t,e){var n=e.test,i=e.question;-1===n.questions.findIndex(function(t){return t._id===i._id})&&n.questions.push(i)},DELETE_QUESTION:function(t,e){var n=e.test,i=e.question,s=n.questions.indexOf(i);-1!==s&&n.questions.splice(s,1)},SAVE_TEST:function(t,e){var n=t.tests.findIndex(function(t){return t._id===e._id});-1!==n&&t.tests.splice(n,1,e)},DELETE_TEST:function(t,e){var n=t.tests.indexOf(e);-1!==n&&t.tests.splice(n,1)}},getters:{tests:function(t){return t.tests},publishedTests:function(t){return t.tests.filter(function(t){return t.published})}}};a.default.use(f.a);var ct=new f.a.Store({state:{user:null,navigationDrawer:!1},mutations:{setLoggedUser:function(t,e){t.user=e},navigationDrawerChange:function(t){t.navigationDrawer=!t.navigationDrawer}},actions:{getLoggedUser:function(t){var e=t.commit,n=t.state,i=window.$cookies.get("user_id");!i||n.user&&n.user._id===i||M.get("/api/v1/user",{params:{id:i}}).then(function(t){var n=t.data;e("setLoggedUser",n)})}},modules:{questionPack:z,questions:et,test:rt},strict:!1}),ut=n("aYpo"),lt=n.n(ut),dt=n("1kLA"),vt=n.n(dt);a.default.use(F.a),a.default.use(K.a),a.default.use(lt.a),a.default.use(vt.a,{position:"bottom-full",enter:"fadeIn",leave:"fadeOut",itemClass:"p"}),a.default.config.productionTip=!1,v.checkAuthentication(),new a.default({el:"#app",router:I,components:{App:c},template:"<App/>",store:ct})},RQLV:function(t,e){},vCCo:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.d72fa0904751feb6224f.js.map