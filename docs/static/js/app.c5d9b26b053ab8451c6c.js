webpackJsonp([1],{NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={};n.d(i,"GET_QUESTION_PACKS",function(){return b}),n.d(i,"ADD_QUESTION_PACK",function(){return T}),n.d(i,"SAVE_QUESTION_PACK",function(){return E}),n.d(i,"DELETE_QUESTION_PACK",function(){return q});var s={};n.d(s,"GET_QUESTIONS",function(){return S}),n.d(s,"GET_ALL_QUESTIONS",function(){return x}),n.d(s,"ADD_QUESTION",function(){return P}),n.d(s,"SAVE_QUESTION",function(){return Q}),n.d(s,"DELETE_QUESTION",function(){return D});var o={};n.d(o,"GET_TESTS",function(){return y}),n.d(o,"ADD_TEST",function(){return O}),n.d(o,"ADD_TEST_TITLE_ONLY",function(){return A}),n.d(o,"SAVE_TEST",function(){return C}),n.d(o,"DELETE_TEST",function(){return $});var a=n("7+uW"),r=n("Dd8w"),c=n.n(r),u=n("NYxO"),l={name:"app",computed:c()({},Object(u.d)({snackbar:function(t){return t.snackbar}}))},d={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("app-header"),t._v(" "),n("v-content",[n("v-container",{attrs:{fluid:""}},[n("router-view")],1)],1),t._v(" "),n("v-snackbar",{attrs:{timeout:t.snackbar.timeout,color:t.snackbar.color},model:{value:t.snackbar.show,callback:function(e){t.$set(t.snackbar,"show",e)},expression:"snackbar.show"}},[t._v("\n    "+t._s(t.snackbar.message)+"\n    "),n("v-btn",{attrs:{dark:"",flat:""},nativeOn:{click:function(e){t.snackbar.show=!1}}},[n("v-icon",[t._v("close")])],1)],1)],1)},staticRenderFns:[]};var v=n("VU/8")(l,d,!1,function(t){n("RwaQ")},null,null).exports,p=n("/ocq"),_=n("mtWM"),m=n.n(_);var f={getCookie:function(t){var e=("; "+document.cookie).split("; "+t+"=");if(2===e.length)return e.pop().split(";").shift()}},h={authenticate:function(t,e,n){m.a.post("https://testingmanager.herokuapp.com/api/v1/auth",e).then(function(e){var i=e.data;t.$cookies.set("token",i.token,"1D"),t.$cookies.set("user_id",i.user._id,"1D"),t.$store.commit("setLoggedUser",i.user),n&&wt.push(n)}).catch(function(e){var n=e.response.data;t.$store.commit("setSnackbar",n)})},signup:function(t,e,n){var i=this;m.a.post("https://testingmanager.herokuapp.com/api/v1/signup",e).then(function(){i.authenticate(t,e,n)}).catch(function(e){var n=e.response.data;t.$store.commit("setSnackbar",n)})},signout:function(t,e){t.$cookies.remove("token"),t.$cookies.remove("user_id"),t.$store.commit("setLoggedUser",null),e&&wt.push(e)},checkAuthentication:function(){return window.$cookies.keys().length>0},getAuthenticationHeader:function(t){return"Bearer "+f.getCookie("token")}},k=m.a.create({baseURL:"https://testingmanager.herokuapp.com"});k.defaults.headers.common.Authorization=h.getAuthenticationHeader(this);var g=k;function b(t){var e=t.commit;g.get("/api/v1/question_pack").then(function(t){var n=t.data;e("SET_QUESTION_PACKS",n)})}function T(t,e){var n=t.commit;g.post("/api/v1/question_pack",{title:e}).then(function(t){var e=t.data;n("ADD_QUESTION_PACK",e.question_pack),n("setSnackbar",e,{root:!0})})}function E(t,e){var n=t.commit;g.put("/api/v1/question_pack/single",{_id:e._id,title:e.title}).then(function(t){var e=t.data;n("setSnackbar",e,{root:!0})})}function q(t,e){var n=t.commit;g.delete("/api/v1/question_pack",{params:{question_pack_id:e._id}}).then(function(t){var i=t.data;n("DELETE_QUESTION_PACK",e),n("setSnackbar",i,{root:!0})})}var w={namespaced:!0,state:{questionPacks:[]},actions:i,mutations:{SET_QUESTION_PACKS:function(t,e){t.questionPacks=e},ADD_QUESTION_PACK:function(t,e){t.questionPacks.push(e)},DELETE_QUESTION_PACK:function(t,e){var n=t.questionPacks.indexOf(e);-1!==n&&t.questionPacks.splice(n,1)}},getters:{questionPacks:function(t){return t.questionPacks}}};function S(t,e){var n=t.commit;g.get("/api/v1/question",{params:{question_pack:e._id}}).then(function(t){var e=t.data;n("SET_QUESTIONS",e)})}function x(t){var e=t.commit;g.get("/api/v1/question").then(function(t){var n=t.data;e("SET_QUESTIONS",n)})}function P(t,e){var n=t.commit;return g.post("/api/v1/question",e).then(function(t){var e=t.data;return n("ADD_QUESTION",e.question),n("setSnackbar",e,{root:!0}),e})}function Q(t,e){var n=t.commit;return g.put("/api/v1/question/single",e).then(function(t){var e=t.data;return n("SAVE_QUESTION",e.question),n("setSnackbar",e,{root:!0}),e})}function D(t,e){var n=t.commit;g.delete("/api/v1/question",{params:{question_id:e._id}}).then(function(t){var i=t.data;n("DELETE_QUESTION",e),n("setSnackbar",i,{root:!0})})}var U={namespaced:!0,state:{questions:[]},actions:s,mutations:{SET_QUESTIONS:function(t,e){t.questions=e},DELETE_QUESTION:function(t,e){var n=t.questions.indexOf(e);-1!==n&&t.questions.splice(n,1)},ADD_QUESTION:function(t,e){t.questions.push(e)},SAVE_QUESTION:function(t,e){var n=t.questions.findIndex(function(t){return t._id===e._id});-1!==n&&t.questions.splice(n,1,e)}},getters:{questions:function(t){return t.questions}}};function y(t){var e=t.commit;g.get("/api/v1/test").then(function(t){var n=t.data;e("SET_TESTS",n)})}function O(t,e){g.post("/api/v1/test",e).then(function(e){var n=e.data;t.commit("ADD_TEST",n.test),t.commit("setSnackbar",n,{root:!0})})}function A(t,e){O(t,{title:e,description:"",questions:[],author:t.rootState.user})}function C(t,e){var n=t.commit;g.put("/api/v1/test/single",e).then(function(t){var e=t.data;n("SAVE_TEST",e.test),n("setSnackbar",e,{root:!0})})}function $(t,e){var n=t.commit;g.delete("/api/v1/test",{params:{test_id:e._id}}).then(function(t){var i=t.data;n("DELETE_TEST",e),n("setSnackbar",i,{root:!0})})}var N={namespaced:!0,state:{tests:[]},actions:o,mutations:{SET_TESTS:function(t,e){t.tests=e},ADD_TEST:function(t,e){t.tests.push(e)},ADD_QUESTION:function(t,e){var n=e.test,i=e.question;-1===n.questions.findIndex(function(t){return t._id===i._id})&&n.questions.push(i)},DELETE_QUESTION:function(t,e){var n=e.test,i=e.question,s=n.questions.indexOf(i);-1!==s&&n.questions.splice(s,1)},SAVE_TEST:function(t,e){var n=t.tests.findIndex(function(t){return t._id===e._id});-1!==n&&t.tests.splice(n,1,e)},DELETE_TEST:function(t,e){var n=t.tests.indexOf(e);-1!==n&&t.tests.splice(n,1)}},getters:{tests:function(t){return t.tests},publishedTests:function(t){return t.tests.filter(function(t){return t.published})}}},I=n("BO1k"),L=n.n(I),V=n("mvHQ"),F=n.n(V),H={namespaced:!0,state:{test:{},currentQuestion:1},mutations:{SET_TEST:function(t,e){t.test=JSON.parse(F()(e))},SET_CURRENT_QUESTION:function(t,e){t.currentQuestion=e}},actions:{getTestByID:function(t,e){var n=t.commit;g.get("/api/v1/test/single",{params:{_id:e}}).then(function(t){var e=t.data;n("SET_TEST",e)})},submitTestForCheck:function(t,e){var n=e;delete n.title,delete n.author,delete n.description,delete n.publish_date,delete n.published;var i=!0,s=!1,o=void 0;try{for(var a,r=L()(n.questions);!(i=(a=r.next()).done);i=!0){var c=a.value;delete c.question,delete c.question_pack}}catch(t){s=!0,o=t}finally{try{!i&&r.return&&r.return()}finally{if(s)throw o}}g.post("/api/v1/tester",{test:n,user:t.rootState.user})}},getters:{}};a.a.use(u.a);var R=new u.a.Store({state:{user:null,navigationDrawer:!1,snackbar:{timeout:2e3,color:"",message:"",show:!1}},mutations:{setLoggedUser:function(t,e){t.user=e},navigationDrawerChange:function(t){t.navigationDrawer=!t.navigationDrawer},setSnackbar:function(t,e){t.snackbar.color=e.success?"success":"error",t.snackbar.message=e.message,t.snackbar.show=!0}},actions:{getLoggedUser:function(t){var e=t.commit,n=t.state,i=f.getCookie("user_id");if(i&&(!n.user||n.user._id!==i))return g.get("/api/v1/user",{params:{id:i}}).then(function(t){var n=t.data;e("setLoggedUser",n)})}},modules:{questionPack:w,questions:U,test:N,tester:H},strict:!1}),j={data:function(){return{headers:[{value:"title",text:"Название"},{value:"author_username",text:"Автор"},{value:"questions_count",text:"Вопросов"}]}},computed:c()({},Object(u.b)({getPublishedTests:"test/publishedTests"})),mounted:function(){this.$store.dispatch("test/GET_TESTS")},methods:{}},K={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",{attrs:{flat:""}},[n("v-toolbar",{attrs:{flat:"",dark:"",color:"primary",app:""}},[n("v-toolbar-side-icon",{on:{click:function(e){e.stopPropagation(),t.$store.commit("navigationDrawerChange")}}})],1),t._v(" "),n("v-card-title",{staticClass:"headline"},[t._v("Доступные тесты")]),t._v(" "),n("v-card-text",[n("v-data-table",{attrs:{items:t.getPublishedTests,headers:t.headers,"rows-per-page-text":"Показывать на странице: ","rows-per-page-items":[10,25,50,{text:"All",value:-1}]},scopedSlots:t._u([{key:"items",fn:function(e){return[n("td",[n("router-link",{attrs:{to:{name:"Tester",params:{id:e.item._id}}}},[t._v(t._s(e.item.title))])],1),t._v(" "),n("td",[t._v(t._s(e.item.author.username))]),t._v(" "),n("td",[t._v(t._s(e.item.questions.length))])]}}])})],1)],1)},staticRenderFns:[]},M=n("VU/8")(j,K,!1,null,null,null).exports,G={data:function(){return{testListViewing:!0,currentTest:null,newTestTitle:"",newTestDialog:!1,testTitleEditing:!1,testDescriptionEditing:!1,selectedQuestonPack:null,testTableFields:[{value:"title",text:"Название"},{value:"author.username",text:"Автор"},{value:"published",text:"Опубликовано"},{value:"actions",text:"Действия",align:"rigth"}],customToolbar:[["bold","italic","underline"],[{list:"ordered"},{list:"bullet"}],["code-block"]]}},computed:c()({question_pack_options:function(){var t=[],e=!0,n=!1,i=void 0;try{for(var s,o=L()(this.question_packs);!(e=(s=o.next()).done);e=!0){var a=s.value;t.push({value:a,text:a.title})}}catch(t){n=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw i}}return t},questionsOfSelectedQuestionPack:function(){var t=this;return null!==this.selectedQuestonPack?this.questions.filter(function(e){return e.question_pack._id===t.selectedQuestonPack._id}):null}},Object(u.b)({tests:"test/tests",questions:"questions/questions",question_packs:"questionPack/questionPacks"})),mounted:function(){this.$store.dispatch("test/GET_TESTS"),this.$store.dispatch("questionPack/GET_QUESTION_PACKS"),this.$store.dispatch("questions/GET_ALL_QUESTIONS")},methods:{questionAlreadyInTest:function(t){return-1!==this.currentTest.questions.findIndex(function(e){return e._id===t._id})},deleteTest:function(t){confirm("Вы уверены что хотите удалить тест")&&this.$store.dispatch("test/DELETE_TEST",t)}}},J={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.testListViewing?n("v-card",{attrs:{flat:""}},[n("v-toolbar",{attrs:{flat:"",dark:"",color:"primary",app:""}},[n("v-toolbar-side-icon",{on:{click:function(e){e.stopPropagation(),t.$store.commit("navigationDrawerChange")}}}),t._v(" "),n("v-btn",{staticClass:"lighten-1",attrs:{small:"",color:"primary"},nativeOn:{click:function(e){t.newTestDialog=!0}}},[n("v-icon",[t._v("add")]),t._v("\n        Добавить тест\n      ")],1)],1),t._v(" "),n("v-card-text",[n("v-data-table",{attrs:{headers:t.testTableFields,items:t.tests,"rows-per-page-text":"Показывать на странице: ","rows-per-page-items":[10,25,50,{text:"All",value:-1}]},scopedSlots:t._u([{key:"items",fn:function(e){return[n("td",[n("a",{on:{click:function(n){n.stopPropagation(),t.testListViewing=!t.testListViewing,t.currentTest=JSON.parse(JSON.stringify(e.item))}}},[t._v("\n              "+t._s(e.item.title)+"\n            ")])]),t._v(" "),n("td",[t._v(t._s(e.item.author.username))]),t._v(" "),n("td",[e.item.published?n("v-icon",{attrs:{color:"teal"}},[t._v("check_circle")]):n("v-icon",{attrs:{color:"pink"}},[t._v("remove_circle")])],1),t._v(" "),n("td",{staticClass:"text-xs-right px-0"},[n("v-btn",{staticClass:"mx-0",attrs:{icon:""},nativeOn:{click:function(n){t.deleteTest(e.item)}}},[n("v-icon",{attrs:{color:"pink"}},[t._v("delete")])],1)],1)]}}])})],1),t._v(" "),n("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.newTestDialog,callback:function(e){t.newTestDialog=e},expression:"newTestDialog"}},[n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[t._v("Добавить новый тест")])]),t._v(" "),n("v-card-text",[n("v-text-field",{attrs:{label:"Название",required:""},model:{value:t.newTestTitle,callback:function(e){t.newTestTitle=e},expression:"newTestTitle"}})],1),t._v(" "),n("v-card-actions",[n("v-spacer"),t._v(" "),n("v-btn",{attrs:{color:"blue darken-1",flat:""},nativeOn:{click:function(e){t.newTestDialog=!1}}},[t._v("Отмена")]),t._v(" "),n("v-btn",{attrs:{color:"blue darken-1",flat:""},nativeOn:{click:function(e){t.$store.dispatch("test/ADD_TEST_TITLE_ONLY",t.newTestTitle),t.newTestTitle="",t.newTestDialog=!1}}},[t._v("\n            Сохранить\n          ")])],1)],1)],1)],1):n("v-card",{attrs:{flat:""}},[n("v-toolbar",{attrs:{flat:"",dark:"",color:"primary",app:""}},[n("v-toolbar-side-icon",{on:{click:function(e){e.stopPropagation(),t.$store.commit("navigationDrawerChange")}}}),t._v(" "),n("v-btn",{staticClass:"lighten-1",attrs:{small:"",color:"primary"},on:{click:function(e){t.testListViewing=!0,t.currentTest=null}}},[n("v-icon",[t._v("arrow_back")]),t._v("Назад\n      ")],1),t._v(" "),n("v-btn",{attrs:{small:"",color:"success"},on:{click:function(e){t.$store.dispatch("test/SAVE_TEST",t.currentTest)}}},[n("v-icon",[t._v("save")]),t._v("Сохранить\n      ")],1),t._v(" "),n("v-btn",{attrs:{small:"",color:t.currentTest.published?"success":"warning"},on:{click:function(e){t.currentTest.published=!t.currentTest.published}}},[t._v("\n        "+t._s(t.currentTest.published?"Опубликовано":"Опубликовать")+"\n      ")])],1),t._v(" "),n("v-card-title",[t.testTitleEditing?n("v-layout",{attrs:{row:""}},[n("v-text-field",{attrs:{label:"Название"},model:{value:t.currentTest.title,callback:function(e){t.$set(t.currentTest,"title",e)},expression:"currentTest.title"}}),t._v(" "),n("v-btn",{staticClass:"mx-0",attrs:{icon:""},on:{click:function(e){t.testTitleEditing=!1}}},[n("v-icon",{attrs:{color:"primary"}},[t._v("save")])],1)],1):n("span",{staticClass:"headline"},[t._v("\n        "+t._s(t.currentTest.title)+"\n        "),n("a",{on:{click:function(e){t.testTitleEditing=!0}}},[n("v-icon",{attrs:{small:"",color:"primary"}},[t._v("edit")])],1)])],1),t._v(" "),n("v-card-text",[n("div",[t.testDescriptionEditing?n("v-card",[n("vue-editor",{attrs:{editorToolbar:t.customToolbar,id:"description-editor"},model:{value:t.currentTest.description,callback:function(e){t.$set(t.currentTest,"description",e)},expression:"currentTest.description"}}),t._v(" "),n("v-btn",{attrs:{color:"primary",small:"",absolute:"",bottom:"",right:"",fab:""},on:{click:function(e){t.testDescriptionEditing=!1}}},[n("v-icon",{attrs:{color:"white"}},[t._v("done")])],1)],1):n("v-card",{attrs:{flat:""}},[n("v-btn",{attrs:{color:"primary",small:"",absolute:"",bottom:"",right:"",fab:""},on:{click:function(e){t.testDescriptionEditing=!0}}},[n("v-icon",{attrs:{color:"white"}},[t._v("edit")])],1),t._v(" "),n("span",{domProps:{innerHTML:t._s(t.currentTest.description)}})],1)],1),t._v(" "),n("v-layout",{staticClass:"mt-3",attrs:{row:"",wrap:"","justify-space-between":""}},[n("v-flex",{staticClass:"mr-4",attrs:{xs8:""}},t._l(t.currentTest.questions,function(e){return n("div",{key:e._id,staticClass:"tquestion",on:{click:function(n){n.stopPropagation(),t.$store.commit("test/DELETE_QUESTION",{test:t.currentTest,question:e})}}},[n("div",[n("span",{domProps:{innerHTML:t._s(e.question)}}),t._v(" "),n("small",{staticClass:"grey--text"},[t._v(t._s(e.question_pack.title))])]),t._v(" "),n("v-chip",{staticClass:"primary white--text",attrs:{small:"",disabled:""}},[t._v(t._s(e.type))])],1)})),t._v(" "),n("v-flex",{attrs:{xs3:""}},[n("v-select",{attrs:{label:"Добавить вопросы из сборника:",items:t.question_pack_options},model:{value:t.selectedQuestonPack,callback:function(e){t.selectedQuestonPack=e},expression:"selectedQuestonPack"}}),t._v(" "),t._l(t.questionsOfSelectedQuestionPack,function(e){return n("div",{key:e._id,staticClass:"tquestion",class:t.questionAlreadyInTest(e)&&"info white--text",on:{click:function(n){n.stopPropagation(),t.$store.commit("test/ADD_QUESTION",{test:t.currentTest,question:e})}}},[n("span",{domProps:{innerHTML:t._s(e.question)}}),t._v(" "),n("v-spacer"),t._v(" "),n("v-chip",{attrs:{dark:"",small:"",disabled:""}},[t._v(t._s(e.type))])],1)})],2)],1)],1)],1)],1)},staticRenderFns:[]};var B=n("VU/8")(G,J,!1,function(t){n("RQLV")},null,null).exports,Y=n("fZjL"),z=n.n(Y),W=n("c65n"),X=n.n(W),Z={data:function(){return{QuestionType:X.a,questionTypes:z()(X.a).map(function(t){return X.a[t]}),customToolbar:[["bold","italic","underline"],[{list:"ordered"},{list:"bullet"}],["code-block"]]}},props:["question_pack_id","question"],methods:{updateQuestion:function(){"выбор"===this.question.type&&(this.question.answers=this.question.choise_answers);var t={_id:this.question._id,question:this.question.question,type:this.question.type,question_pack:this.question_pack_id,answers:this.question.answers};this.question._id?this.$store.dispatch("questions/SAVE_QUESTION",t):this.$store.dispatch("questions/ADD_QUESTION",t)}}},tt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",[n("v-toolbar",{attrs:{dark:"",color:"primary"}},[n("v-btn",{attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.$parent.$emit("close")}}},[n("v-icon",[t._v("close")])],1),t._v(" "),n("v-toolbar-title",[t._v("Редактирование вопроса")]),t._v(" "),n("v-spacer"),t._v(" "),n("v-select",{attrs:{label:"Тип вопроса",items:t.questionTypes},model:{value:t.question.type,callback:function(e){t.$set(t.question,"type",e)},expression:"question.type"}}),t._v(" "),n("v-spacer"),t._v(" "),n("v-toolbar-items",[n("v-btn",{attrs:{dark:"",flat:""},nativeOn:{click:function(e){t.updateQuestion(),t.$parent.$emit("close")}}},[t._v("Сохранить")])],1)],1),t._v(" "),n("v-card-text",[n("vue-editor",{attrs:{editorToolbar:t.customToolbar},model:{value:t.question.question,callback:function(e){t.$set(t.question,"question",e)},expression:"question.question"}}),t._v(" "),n("span",[t._v("Ответ(ы):")]),t._v(" "),t.question.type==t.QuestionType.CHOISE?n("div",t._l(t.question.choise_answers,function(e,i){return n("v-layout",{key:i,attrs:{"align-center":""}},[n("v-checkbox",{staticClass:"shrink mr-2",attrs:{"hide-details":""},model:{value:e.correct,callback:function(n){t.$set(e,"correct",n)},expression:"answer.correct"}}),t._v(" "),n("v-text-field",{attrs:{label:"Ответ "+(i+1)},model:{value:e.answer,callback:function(n){t.$set(e,"answer",n)},expression:"answer.answer"}}),t._v(" "),i!=t.question.choise_answers.length-1?n("v-btn",{attrs:{flat:"",icon:"",color:"error"},on:{click:function(){-1!==i&&t.question.choise_answers.splice(i,1)}}},[n("v-icon",[t._v("remove_circle")])],1):t._e(),t._v(" "),i==t.question.choise_answers.length-1?n("v-btn",{attrs:{flat:"",icon:"",color:"success"},on:{click:function(e){t.question.choise_answers.push({answer:"",correct:!1})}}},[n("v-icon",[t._v("add_circle")])],1):t._e()],1)})):t._e()],1)],1)},staticRenderFns:[]},et={question:"",type:"выбор",choise_answers:[{answer:"",correct:!1},{answer:"",correct:!1}]},nt={components:{"question-editor":n("VU/8")(Z,tt,!1,null,null,null).exports},data:function(){return{newQuestionPackName:"",newQuestionPackDialog:!1,questionPackEditDialog:!1,questionPackHeaders:[{value:"title",text:"Название"},{value:"actions",text:"Действия",align:"right"}],questionsEditing:!1,needUpdateQuestionCounts:!1,questionEditorDialog:!1,questionPackForEdit:{},questionEditorFields:[{value:"question",text:"Вопрос"},{value:"actions",text:"Действия",align:"right"}],newQuestion:JSON.parse(F()(et))}},props:["fields"],computed:c()({curentQuestionSet:function(){var t=this;return this.questions.filter(function(e){return e.question_pack._id===t.questionPackForEdit._id})}},Object(u.b)({question_packs:"questionPack/questionPacks",questions:"questions/questions",questionSetCount:"questions/questionSetCount"})),mounted:function(){this.$store.dispatch("questionPack/GET_QUESTION_PACKS"),this.$store.dispatch("questions/GET_ALL_QUESTIONS")},methods:{saveQuestionPack:function(t){this.$store.dispatch("questionPack/SAVE_QUESTION_PACK",t),this.questionPackForEdit={},this.newQuestionPackName="",this.questionPackEditDialog=!1},addQuestionPack:function(){this.$store.dispatch("questionPack/ADD_QUESTION_PACK",this.newQuestionPackName),this.newQuestionPackDialog=!1},getQuestionsForEditor:function(t){(this.questionPackForEdit!==t||this.needUpdateQuestionCounts)&&(this.questionPackForEdit=t)},showQuestionEditorModal:function(t){t?(this.newQuestion=JSON.parse(F()(t)),"выбор"===this.newQuestion.type&&(this.newQuestion.choise_answers=this.newQuestion.answers)):this.newQuestion=JSON.parse(F()(et)),this.questionEditorDialog=!0},deleteQuestionPack:function(t){confirm("Вы уверены что хотите удалить сборник вопросов?")&&this.$store.dispatch("questionPack/DELETE_QUESTION_PACK",t)},deleteQuestion:function(t){confirm("Вы уверены что хотите удалить вопрос?")&&this.$store.dispatch("questions/DELETE_QUESTION",t)}}},it={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.questionsEditing?n("v-card",{attrs:{flat:""}},[n("v-toolbar",{attrs:{flat:"",dark:"",color:"primary",app:""}},[n("v-toolbar-side-icon",{on:{click:function(e){e.stopPropagation(),t.$store.commit("navigationDrawerChange")}}}),t._v(" "),n("v-btn",{staticClass:"lighten-1",attrs:{small:"",color:"primary"},on:{click:function(e){e.stopPropagation(),t.questionsEditing=!1}}},[n("v-icon",[t._v("arrow_back")]),t._v("\n        Назад\n      ")],1),t._v(" "),n("v-btn",{staticClass:"lighten-1",attrs:{small:"",color:"primary"},on:{click:function(e){e.stopPropagation(),t.showQuestionEditorModal(null),t.questionEditorDialog=!0}}},[n("v-icon",[t._v("add")]),t._v("\n        Добавить вопрос\n      ")],1)],1),t._v(" "),n("v-data-table",{attrs:{headers:t.questionEditorFields,items:t.curentQuestionSet,"rows-per-page-text":"Показывать на странице: ","rows-per-page-items":[10,25,50,{text:"All",value:-1}]},scopedSlots:t._u([{key:"items",fn:function(e){return[n("td",[n("a",{staticClass:"question",domProps:{innerHTML:t._s(e.item.question)},on:{click:function(n){n.stopPropagation(),t.showQuestionEditorModal(e.item)}}}),t._v(" "),n("v-chip",{staticClass:"primary white--text",attrs:{small:"",disabled:""}},[t._v(t._s(e.item.type))])],1),t._v(" "),n("td",{staticClass:"text-xs-right px-0"},[n("v-btn",{staticClass:"mx-0",attrs:{icon:""},on:{click:function(n){t.deleteQuestion(e.item)}}},[n("v-icon",{attrs:{color:"pink"}},[t._v("delete")])],1)],1)]}}])},[n("template",{slot:"no-data"},[n("v-alert",{attrs:{value:!0,color:"warning",icon:"warning"}},[t._v("Здесь ничего нет")])],1)],2),t._v(" "),n("v-dialog",{attrs:{fullscreen:"",transition:"dialog-bottom-transition"},on:{close:function(e){t.questionEditorDialog=!1}},model:{value:t.questionEditorDialog,callback:function(e){t.questionEditorDialog=e},expression:"questionEditorDialog"}},[n("question-editor",{attrs:{question_pack_id:t.questionPackForEdit._id,question:t.newQuestion}})],1)],1):n("v-card",{attrs:{flat:""}},[n("v-toolbar",{attrs:{flat:"",dark:"",color:"primary",app:""}},[n("v-toolbar-side-icon",{on:{click:function(e){e.stopPropagation(),t.$store.commit("navigationDrawerChange")}}}),t._v(" "),n("v-btn",{staticClass:"lighten-1",attrs:{small:"",color:"primary"},on:{click:function(e){e.stopPropagation(),t.newQuestionPackDialog=!0}}},[n("v-icon",[t._v("add")]),t._v("\n        Добавить сборник вопросов\n      ")],1)],1),t._v(" "),n("v-data-table",{attrs:{headers:t.questionPackHeaders,items:t.question_packs,"rows-per-page-text":"Показывать на странице: ","rows-per-page-items":[10,25,50,{text:"All",value:-1}]},scopedSlots:t._u([{key:"items",fn:function(e){return[n("td",[n("a",{on:{click:function(n){t.questionsEditing=!t.questionsEditing,t.getQuestionsForEditor(e.item)}}},[t._v(t._s(e.item.title))])]),t._v(" "),n("td",{staticClass:"justify-center text-xs-right px-0"},[n("v-btn",{staticClass:"mx-0",attrs:{icon:""},nativeOn:{click:function(n){t.questionPackEditDialog=!0,t.questionPackForEdit=e.item,t.newQuestionPackName=e.item.title}}},[n("v-icon",{attrs:{color:"teal"}},[t._v("edit")])],1),t._v(" "),n("v-btn",{staticClass:"mx-0",attrs:{icon:""},on:{click:function(n){t.deleteQuestionPack(e.item)}}},[n("v-icon",{attrs:{color:"pink"}},[t._v("delete")])],1)],1)]}}])},[n("template",{slot:"no-data"},[n("v-alert",{attrs:{value:!0,color:"warning",icon:"warning"}},[t._v("Здесь ничего нет")])],1)],2),t._v(" "),n("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.newQuestionPackDialog,callback:function(e){t.newQuestionPackDialog=e},expression:"newQuestionPackDialog"}},[n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[t._v("Добавить новый сборник вопросов")])]),t._v(" "),n("v-card-text",[n("v-text-field",{attrs:{label:"Название",required:""},model:{value:t.newQuestionPackName,callback:function(e){t.newQuestionPackName=e},expression:"newQuestionPackName"}})],1),t._v(" "),n("v-card-actions",[n("v-spacer"),t._v(" "),n("v-btn",{attrs:{color:"blue darken-1",flat:""},nativeOn:{click:function(e){t.newQuestionPackDialog=!1}}},[t._v("Отмена")]),t._v(" "),n("v-btn",{attrs:{color:"blue darken-1",flat:""},nativeOn:{click:function(e){t.addQuestionPack(),t.newQuestionPackName=""}}},[t._v("Сохранить")])],1)],1)],1),t._v(" "),n("v-dialog",{attrs:{"max-width":"500px",lazy:""},model:{value:t.questionPackEditDialog,callback:function(e){t.questionPackEditDialog=e},expression:"questionPackEditDialog"}},[n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[t._v("Переименовать сборник вопросов")])]),t._v(" "),n("v-card-text",[n("v-text-field",{attrs:{label:"Название",required:""},model:{value:t.newQuestionPackName,callback:function(e){t.newQuestionPackName=e},expression:"newQuestionPackName"}})],1),t._v(" "),n("v-card-actions",[n("v-spacer"),t._v(" "),n("v-btn",{attrs:{color:"blue darken-1",flat:""},nativeOn:{click:function(e){t.questionPackEditDialog=!1}}},[t._v("Отмена")]),t._v(" "),n("v-btn",{attrs:{color:"blue darken-1",flat:""},nativeOn:{click:function(e){t.questionPackForEdit.title=t.newQuestionPackName,t.saveQuestionPack(t.questionPackForEdit)}}},[t._v("Сохранить")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var st=n("VU/8")(nt,it,!1,function(t){n("aySg")},null,null).exports,ot={data:function(){return{snackbar:!1,validLogin:!1,validSignUp:!1,signUpVisible:!1,loginPasswordVisible:!1,signUpPasswordVisible:!1,timeout:6e3,rules:[function(t){return!!t||"This field is required"}],credentials:{username:"",password:""},newUser:{username:"",password:""},message:""}},methods:{submitAuthentication:function(){h.authenticate(this,this.credentials,{name:"Home"})},submitSignUp:function(){h.signup(this,this.newUser,{name:"Home"})}}},at={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{staticClass:"l-auth-container",staticStyle:{"max-width":"400px"}},[n("div",{staticClass:"l-auth"},[n("v-form",{model:{value:t.validLogin,callback:function(e){t.validLogin=e},expression:"validLogin"}},[n("v-text-field",{attrs:{label:"Username","prepend-icon":"account_box",rules:t.rules,required:"",color:"light-blue lighten-1"},model:{value:t.credentials.username,callback:function(e){t.$set(t.credentials,"username",e)},expression:"credentials.username"}}),t._v(" "),n("v-text-field",{attrs:{label:"Password","prepend-icon":"lock",rules:t.rules,"append-icon":t.loginPasswordVisible?"visibility":"visibility_off","append-icon-cb":function(){return t.loginPasswordVisible=!t.loginPasswordVisible},type:t.loginPasswordVisible?"text":"password",color:"light-blue lighten-1",required:""},model:{value:t.credentials.password,callback:function(e){t.$set(t.credentials,"password",e)},expression:"credentials.password"}}),t._v(" "),n("v-btn",{attrs:{flat:"",color:"light-blue lighten-1"},nativeOn:{click:function(e){t.signUpVisible=!0}}},[t._v("Create account")]),t._v(" "),n("v-btn",{attrs:{color:"light-blue lighten-1"},nativeOn:{click:function(e){t.submitAuthentication()}}},[t._v("Login")])],1)],1),t._v(" "),t.signUpVisible?n("div",{staticClass:"l-signup"},[n("v-form",{model:{value:t.validSignUp,callback:function(e){t.validSignUp=e},expression:"validSignUp"}},[n("v-text-field",{attrs:{label:"Username","prepend-icon":"account_box",rules:t.rules,required:"",color:"light-blue lighten-1"},model:{value:t.newUser.username,callback:function(e){t.$set(t.newUser,"username",e)},expression:"newUser.username"}}),t._v(" "),n("v-text-field",{attrs:{label:"Password","prepend-icon":"lock",rules:t.rules,"append-icon":t.signUpPasswordVisible?"visibility":"visibility_off","append-icon-cb":function(){return t.signUpPasswordVisible=!t.signUpPasswordVisible},type:t.signUpPasswordVisible?"text":"password",color:"light-blue lighten-1",required:""},model:{value:t.newUser.password,callback:function(e){t.$set(t.newUser,"password",e)},expression:"newUser.password"}}),t._v(" "),n("v-btn",{attrs:{block:"",color:"light-blue lighten-1"},nativeOn:{click:function(e){t.submitSignUp()}}},[t._v("Sign Up")])],1)],1):t._e(),t._v(" "),n("v-snackbar",{attrs:{timeout:t.timeout,bottom:"bottom",color:"red lighten-1"},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v("\n    "+t._s(t.message)+"\n  ")])],1)},staticRenderFns:[]},rt=n("VU/8")(ot,at,!1,null,null,null).exports,ct={computed:c()({question:{get:function(){return this.test.questions[this.current_question-1]}}},Object(u.d)("tester",{test:function(t){return t.test},current_question:function(t){return t.currentQuestion}})),methods:c()({},Object(u.c)({nextQuestion:"tester/NEXT_QUESTION"}))},ut={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",[n("v-card-title",{staticClass:"headline",domProps:{innerHTML:t._s(t.question.question)}}),t._v(" "),"выбор"===t.question.type?n("v-card-text",t._l(t.question.answers,function(e){return n("v-checkbox",{key:e._id,attrs:{label:e.answer},model:{value:e.correct,callback:function(n){t.$set(e,"correct",n)},expression:"answer.correct"}})})):t._e()],1)},staticRenderFns:[]},lt=n("VU/8")(ct,ut,!1,null,null,null).exports,dt=n("d7EF"),vt=n.n(dt),pt=function(t){var e=!0,n=!1,i=void 0;try{for(var s,o=L()(t.questions.entries());!(e=(s=o.next()).done);e=!0){var a=s.value,r=vt()(a,2),c=r[0];if(0===r[1].answers.filter(function(t){return!!t.correct}).length)return c}}catch(t){n=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw i}}return-1},_t={components:{"question-card":lt},data:function(){return{}},computed:c()({current_question:{get:function(){return this.$store.state.tester.currentQuestion},set:function(t){this.$store.commit("tester/SET_CURRENT_QUESTION",t)}}},Object(u.d)("tester",{test:function(t){return t.test}})),mounted:function(){this.$store.dispatch("tester/getTestByID",this.$route.params.id)},methods:{checkForUnansweredQuestions:function(){var t=pt(this.test);if(-1!==t)return this.current_question=t+1,this.$store.commit("setSnackbar",{success:!1,message:"У Вас остались неотвеченные вопросы"}),!1;this.$store.dispatch("tester/submitTestForCheck",this.test),this.$router.push({name:"Home"})}}},mt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",[n("v-toolbar",{attrs:{flat:"",dark:"",color:"primary",app:""}},[n("v-toolbar-side-icon",{on:{click:function(e){e.stopPropagation(),t.$store.commit("navigationDrawerChange")}}}),t._v(" "),n("v-btn",{attrs:{small:"",color:"error",to:{name:"Home"}}},[n("v-icon",[t._v("cancel")]),t._v("\n      Отменить\n    ")],1),t._v(" "),n("v-btn",{attrs:{small:"",color:"success"},nativeOn:{click:function(e){return t.checkForUnansweredQuestions(e)}}},[n("v-icon",[t._v("check")]),t._v("\n      Завершить\n    ")],1)],1),t._v(" "),n("h3",{staticClass:"headline"},[t._v(t._s(t.test.title))]),t._v(" "),n("div",{staticClass:"mx-4 my-2",domProps:{innerHTML:t._s(t.test.description)}}),t._v(" "),n("question-card"),t._v(" "),n("div",{staticClass:"text-xs-center"},[n("v-pagination",{attrs:{length:t.test.questions.length,circle:""},model:{value:t.current_question,callback:function(e){t.current_question=e},expression:"current_question"}})],1)],1)},staticRenderFns:[]},ft=n("VU/8")(_t,mt,!1,null,null,null).exports,ht={computed:c()({},Object(u.d)(["user"])),methods:{submitSignout:function(){h.signout(this,{name:"Home"})}}},kt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",{attrs:{flat:"",app:""}},[n("v-toolbar",{attrs:{flat:"",dark:"",color:"primary",app:"",extended:""}},[n("v-toolbar-side-icon",{on:{click:function(e){e.stopPropagation(),t.$store.commit("navigationDrawerChange")}}})],1),t._v(" "),n("v-layout",{attrs:{row:"","pb-2":""}},[n("v-flex",{attrs:{xs8:"","offset-xs2":""}},[n("v-card",{staticClass:"card--flex-toolbar"},[n("v-toolbar",{attrs:{card:"",prominent:""}},[n("v-avatar",[n("img",{attrs:{src:"https://randomuser.me/api/portraits/lego/5.jpg"}})]),t._v(" "),n("v-toolbar-title",{staticClass:"body-2 grey--text"},[t._v(t._s(t.user.username))]),t._v(" "),n("v-spacer"),t._v(" "),n("v-btn",{attrs:{icon:""},on:{click:function(e){t.submitSignout()}}},[n("v-icon",{attrs:{color:"pink"}},[t._v("exit_to_app")])],1)],1),t._v(" "),n("v-divider"),t._v(" "),n("v-card-text",[n("v-layout",{attrs:{row:"","pb-2":""}},[n("v-flex",[t._v("\n              Имя: "+t._s(t.user.first_name)+"\n            ")]),t._v(" "),n("v-flex",[t._v("\n              Фамилия: "+t._s(t.user.last_name)+"\n            ")]),t._v(" "),t.user.class?n("v-flex",[t._v("\n              Класс: "+t._s(t.user.class)+"\n            ")]):t._e()],1),t._v("\n          Роль: "+t._s(t.user.role)+"\n        ")],1)],1)],1)],1)],1)},staticRenderFns:[]};var gt=n("VU/8")(ht,kt,!1,function(t){n("rxrR")},null,null).exports,bt={computed:c()({},Object(u.d)(["user"])),methods:{submitSignout:function(){h.signout(this,{name:"Home"})},checkAuthentication:function(){return h.checkAuthentication()}}},Tt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-navigation-drawer",{attrs:{app:"",temporary:""},model:{value:t.$store.state.navigationDrawer,callback:function(e){t.$set(t.$store.state,"navigationDrawer",e)},expression:"$store.state.navigationDrawer"}},[n("v-toolbar",{attrs:{flat:""}},[n("v-list",{staticClass:"pa-0"},[t.checkAuthentication()&&t.user?n("v-list-tile",{attrs:{to:{name:"Profile",params:{id:t.user._id}}}},[n("v-list-tile-avatar",[n("img",{attrs:{src:"https://randomuser.me/api/portraits/lego/5.jpg"}})]),t._v(" "),n("v-list-tile-content",[n("v-list-tile-title",[n("v-layout",{attrs:{row:""}},[t._v("\n              "+t._s(t.user.username)+"\n              "),n("v-spacer"),t._v(" "),n("v-btn",{staticClass:"mt-0",attrs:{small:"",icon:""},on:{click:function(e){t.submitSignout()}}},[n("v-icon",{attrs:{color:"pink"}},[t._v("exit_to_app")])],1)],1)],1)],1)],1):n("v-list-tile",{attrs:{to:{name:"Authentication"}}},[n("v-list-tile-action",[n("v-icon",[t._v("lock_open")])],1),t._v(" "),n("v-list-tile-title",[t._v("Войти")])],1)],1)],1),t._v(" "),n("v-divider"),t._v(" "),n("v-list",[n("v-list-tile",{attrs:{to:{name:"Home"}}},[n("v-list-tile-action",[n("v-icon",[t._v("dashboard")])],1),t._v(" "),n("v-list-tile-title",[t._v("Начальная страница")])],1),t._v(" "),t.checkAuthentication()&&t.user&&"Ученик"!==t.user.role?n("div",[n("v-list-tile",{attrs:{to:{name:"TestEditor"}}},[n("v-list-tile-action",[n("v-icon",[t._v("library_books")])],1),t._v(" "),n("v-list-tile-title",[t._v("Редактор тестов")])],1),t._v(" "),n("v-list-tile",{attrs:{to:{name:"QuestionEditor"}}},[n("v-list-tile-action",[n("v-icon",[t._v("question_answer")])],1),t._v(" "),n("v-list-tile-title",[t._v("Редактор вопросов")])],1)],1):t._e()],1)],1)},staticRenderFns:[]},Et=n("VU/8")(bt,Tt,!1,null,null,null).exports;a.a.component("app-header",Et),a.a.use(p.a);var qt=new p.a({routes:[{path:"/",name:"Home",component:M,meta:{requiredAuth:!1}},{path:"/test/:id",name:"Tester",component:ft},{path:"/test-editor",name:"TestEditor",component:B,meta:{requiredAuth:!0,studentAllowed:!1}},{path:"/question-editor",name:"QuestionEditor",component:st,meta:{requiredAuth:!0,studentAllowed:!1}},{path:"/login",name:"Authentication",component:rt},{path:"/profile/:id",name:"Profile",component:gt,meta:{requiredAuth:!0}}]});qt.beforeEach(function(t,e,n){R.dispatch("getLoggedUser").then(function(){t.meta.requiredAuth?h.checkAuthentication()?void 0===t.meta.studentAllowed||t.meta.studentAllowed||"Ученик"!==R.state.user.role?n():n({name:"Home"}):qt.push({name:"Authentication"}):n()})});var wt=qt,St=n("ppUw"),xt=n.n(St),Pt=n("3EgV"),Qt=n.n(Pt),Dt=n("aYpo"),Ut=n.n(Dt);a.a.use(xt.a),a.a.use(Qt.a),a.a.use(Ut.a),a.a.config.productionTip=!1,h.checkAuthentication(),new a.a({el:"#app",router:wt,components:{App:v},template:"<App/>",store:R})},RQLV:function(t,e){},RwaQ:function(t,e){},aySg:function(t,e){},c65n:function(t,e){t.exports={CHOISE:"выбор"}},rxrR:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.c5d9b26b053ab8451c6c.js.map